var Prototype={Version:"1.7.1",Browser:function(){var a=navigator.userAgent,b=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:a.indexOf("AppleWebKit/")>-1,Gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!!(a&&a.prototype)}(),SpecificElementExtensions:function(){if(typeof window.HTMLDivElement!==
"undefined")return true;var a=document.createElement("div"),b=document.createElement("form"),c=false;if(a.__proto__&&a.__proto__!==b.__proto__)c=true;return c}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script\\s*>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};if(Prototype.Browser.MobileSafari)Prototype.BrowserFeatures.SpecificElementExtensions=false;
var Class=function(){function a(){}function b(){function g(){this.initialize.apply(this,arguments)}var k=null,l=$A(arguments);if(Object.isFunction(l[0]))k=l.shift();Object.extend(g,Class.Methods);g.superclass=k;g.subclasses=[];if(k){a.prototype=k.prototype;g.prototype=new a;k.subclasses.push(g)}k=0;for(var p=l.length;k<p;k++)g.addMethods(l[k]);if(!g.prototype.initialize)g.prototype.initialize=Prototype.emptyFunction;return g.prototype.constructor=g}function c(g){var k=this.superclass&&this.superclass.prototype,
l=Object.keys(g);if(e){g.toString!=Object.prototype.toString&&l.push("toString");g.valueOf!=Object.prototype.valueOf&&l.push("valueOf")}for(var p=0,v=l.length;p<v;p++){var o=l[p],u=g[o];if(k&&Object.isFunction(u)&&u.argumentNames()[0]=="$super"){var D=u;u=function(E){return function(){return k[E].apply(this,arguments)}}(o).wrap(D);u.valueOf=function(E){return function(){return E.valueOf.call(E)}}(D);u.toString=function(E){return function(){return E.toString.call(E)}}(D)}this.prototype[o]=u}return this}
var e=function(){for(var g in{toString:1})if(g==="toString")return false;return true}();return{create:b,Methods:{addMethods:c}}}();
(function(){function a(F){switch(F){case null:return s;case void 0:return m}switch(typeof F){case "boolean":return w;case "number":return t;case "string":return z}return x}function b(F,P){for(var W in P)F[W]=P[W];return F}function c(F){try{if(U(F))return"undefined";if(F===null)return"null";return F.inspect?F.inspect():String(F)}catch(P){if(P instanceof RangeError)return"...";throw P;}}function e(F){return g("",{"":F},[])}function g(F,P,W){P=P[F];if(a(P)===x&&typeof P.toJSON==="function")P=P.toJSON(F);
F=h.call(P);switch(F){case L:case K:case f:P=P.valueOf()}switch(P){case null:return"null";case true:return"true";case false:return"false"}switch(typeof P){case "string":return P.inspect(true);case "number":return isFinite(P)?String(P):"null";case "object":for(var R=0,fa=W.length;R<fa;R++)if(W[R]===P)throw new TypeError("Cyclic reference to '"+P+"' in object");W.push(P);var ba=[];if(F===n){R=0;for(fa=P.length;R<fa;R++){var ha=g(R,P,W);ba.push(typeof ha==="undefined"?"null":ha)}ba="["+ba.join(",")+
"]"}else{var ja=Object.keys(P);R=0;for(fa=ja.length;R<fa;R++){F=ja[R];ha=g(F,P,W);typeof ha!=="undefined"&&ba.push(F.inspect(true)+":"+ha)}ba="{"+ba.join(",")+"}"}W.pop();return ba}}function k(F){return JSON.stringify(F)}function l(F){return $H(F).toQueryString()}function p(F){return F&&F.toHTML?F.toHTML():String.interpret(F)}function v(F){if(a(F)!==x)throw new TypeError;var P=[];for(var W in F)j.call(F,W)&&P.push(W);if(Q)for(var R=0;W=I[R];R++)j.call(F,W)&&P.push(W);return P}function o(F){var P=
[];for(var W in F)P.push(F[W]);return P}function u(F){return b({},F)}function D(F){return!!(F&&F.nodeType==1)}function E(F){return h.call(F)===n}function J(F){return F instanceof Hash}function O(F){return h.call(F)===A}function M(F){return h.call(F)===f}function N(F){return h.call(F)===L}function T(F){return h.call(F)===q}function U(F){return typeof F==="undefined"}var h=Object.prototype.toString,j=Object.prototype.hasOwnProperty,s="Null",m="Undefined",w="Boolean",t="Number",z="String",x="Object",
A="[object Function]",K="[object Boolean]",L="[object Number]",f="[object String]",n="[object Array]",q="[object Date]",B=window.JSON&&typeof JSON.stringify==="function"&&JSON.stringify(0)==="0"&&typeof JSON.stringify(Prototype.K)==="undefined",I=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Q=function(){for(var F in{toString:1})if(F==="toString")return false;return true}();if(typeof Array.isArray=="function"&&Array.isArray([])&&!Array.isArray({}))E=
Array.isArray;b(Object,{extend:b,inspect:c,toJSON:B?k:e,toQueryString:l,toHTML:p,keys:Object.keys||v,values:o,clone:u,isElement:D,isArray:E,isHash:J,isFunction:O,isString:M,isNumber:N,isDate:T,isUndefined:U})})();
Object.extend(Function.prototype,function(){function a(E,J){for(var O=E.length,M=J.length;M--;)E[O+M]=J[M];return E}function b(E,J){E=u.call(E,0);return a(E,J)}function c(){var E=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return E.length==1&&!E[0]?[]:E}function e(E){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;if(!Object.isFunction(this))throw new TypeError("The object is not callable.");
var J=function(){},O=this,M=u.call(arguments,1),N=function(){var T=b(M,arguments),U=E;U=this instanceof N?this:E;return O.apply(U,T)};J.prototype=this.prototype;N.prototype=new J;return N}function g(E){var J=this,O=u.call(arguments,1);return function(M){M=a([M||window.event],O);return J.apply(E,M)}}function k(){if(!arguments.length)return this;var E=this,J=u.call(arguments,0);return function(){var O=b(J,arguments);return E.apply(this,O)}}function l(E){var J=this,O=u.call(arguments,1);E*=1E3;return window.setTimeout(function(){return J.apply(J,
O)},E)}function p(){return this.delay.apply(this,a([0.01],arguments))}function v(E){var J=this;return function(){var O=a([J.bind(this)],arguments);return E.apply(this,O)}}function o(){if(this._methodized)return this._methodized;var E=this;return this._methodized=function(){var J=a([this],arguments);return E.apply(null,J)}}var u=Array.prototype.slice,D={argumentNames:c,bindAsEventListener:g,curry:k,delay:l,defer:p,wrap:v,methodize:o};if(!Function.prototype.bind)D.bind=e;return D}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function c(){return this.toISOString()}if(!a.toISOString)a.toISOString=b;if(!a.toJSON)a.toJSON=c})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1E3)},execute:function(){this.callback(this)},stop:function(){if(this.timer){clearInterval(this.timer);this.timer=null}},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=true;this.execute();this.currentlyExecuting=false}catch(a){this.currentlyExecuting=
false;throw a;}}});Object.extend(String,{interpret:function(a){return a==null?"":String(a)},specialChar:{"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(q){if(Object.isFunction(q))return q;var B=new Template(q);return function(I){return B.evaluate(I)}}function b(q,B){var I="",Q=this,F;B=a(B);if(Object.isString(q))q=RegExp.escape(q);if(!(q.length||q.source)){B=B("");return B+Q.split("").join(B)+B}for(;Q.length>0;)if(F=Q.match(q)){I+=Q.slice(0,F.index);I+=String.interpret(B(F));Q=Q.slice(F.index+F[0].length)}else{I+=Q;Q=""}return I}function c(q,B,I){B=a(B);I=Object.isUndefined(I)?1:I;return this.gsub(q,
function(Q){if(--I<0)return Q[0];return B(Q)})}function e(q,B){this.gsub(q,B);return String(this)}function g(q,B){q=q||30;B=Object.isUndefined(B)?"...":B;return this.length>q?this.slice(0,q-B.length)+B:String(this)}function k(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function l(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function p(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function v(){var q=new RegExp(Prototype.ScriptFragment,"img"),
B=new RegExp(Prototype.ScriptFragment,"im");return(this.match(q)||[]).map(function(I){return(I.match(B)||["",""])[1]})}function o(){return this.extractScripts().map(function(q){return eval(q)})}function u(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function D(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function E(q){var B=this.strip().match(/([^?#]*)(#.*)?$/);if(!B)return{};return B[1].split(q||"&").inject({},function(I,
Q){if((Q=Q.split("="))[0]){var F=decodeURIComponent(Q.shift());Q=Q.length>1?Q.join("="):Q[0];if(Q!=undefined)Q=decodeURIComponent(Q);if(F in I){Object.isArray(I[F])||(I[F]=[I[F]]);I[F].push(Q)}else I[F]=Q}return I})}function J(){return this.split("")}function O(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function M(q){return q<1?"":(new Array(q+1)).join(this)}function N(){return this.replace(/-+(.)?/g,function(q,B){return B?B.toUpperCase():""})}function T(){return this.charAt(0).toUpperCase()+
this.substring(1).toLowerCase()}function U(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function h(){return this.replace(/_/g,"-")}function j(q){var B=this.replace(/[\x00-\x1f\\]/g,function(I){if(I in String.specialChar)return String.specialChar[I];return"\\u00"+I.charCodeAt().toPaddedString(2,16)});if(q)return'"'+B.replace(/"/g,'\\"')+'"';return"'"+B.replace(/'/g,"\\'")+"'"}function s(q){return this.replace(q||
Prototype.JSONFilter,"$1")}function m(){var q=this;if(q.blank())return false;q=q.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");q=q.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");q=q.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(q)}function w(q){var B=this.unfilterJSON(),I=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(I.test(B))B=B.replace(I,function(F){return"\\u"+("0000"+F.charCodeAt(0).toString(16)).slice(-4)});
try{if(!q||B.isJSON())return eval("("+B+")")}catch(Q){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function t(){var q=this.unfilterJSON();return JSON.parse(q)}function z(q){return this.indexOf(q)>-1}function x(q){return this.lastIndexOf(q,0)===0}function A(q){var B=this.length-q.length;return B>=0&&this.indexOf(q,B)===B}function K(){return this==""}function L(){return/^\s*$/.test(this)}function f(q,B){return(new Template(this,B)).evaluate(q)}var n=window.JSON&&typeof JSON.parse===
"function"&&JSON.parse('{"test": true}').test;return{gsub:b,sub:c,scan:e,truncate:g,strip:String.prototype.trim||k,stripTags:l,stripScripts:p,extractScripts:v,evalScripts:o,escapeHTML:u,unescapeHTML:D,toQueryParams:E,parseQuery:E,toArray:J,succ:O,times:M,camelize:N,capitalize:T,underscore:U,dasherize:h,inspect:j,unfilterJSON:s,isJSON:m,evalJSON:n?t:w,include:z,startsWith:x,endsWith:A,empty:K,blank:L,interpolate:f}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){if(a&&Object.isFunction(a.toTemplateReplacements))a=a.toTemplateReplacements();return this.template.gsub(this.pattern,function(b){if(a==null)return b[1]+"";var c=b[1]||"";if(c=="\\")return b[2];var e=a,g=b[3],k=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=k.exec(g);if(b==null)return c;for(;b!=null;){var l=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1];e=e[l];if(null==
e||""==b[3])break;g=g.substring("["==b[3]?b[1].length:b[0].length);b=k.exec(g)}return c+String.interpret(e)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(m,w){try{this._each(m,w)}catch(t){if(t!=$break)throw t;}return this}function b(m,w,t){var z=-m,x=[],A=this.toArray();if(m<1)return A;for(;(z+=m)<A.length;)x.push(A.slice(z,z+m));return x.collect(w,t)}function c(m,w){m=m||Prototype.K;var t=true;this.each(function(z,x){t=t&&!!m.call(w,z,x,this);if(!t)throw $break;},this);return t}function e(m,w){m=m||Prototype.K;var t=false;this.each(function(z,x){if(t=!!m.call(w,z,x,this))throw $break;},this);return t}
function g(m,w){m=m||Prototype.K;var t=[];this.each(function(z,x){t.push(m.call(w,z,x,this))},this);return t}function k(m,w){var t;this.each(function(z,x){if(m.call(w,z,x,this)){t=z;throw $break;}},this);return t}function l(m,w){var t=[];this.each(function(z,x){m.call(w,z,x,this)&&t.push(z)},this);return t}function p(m,w,t){w=w||Prototype.K;var z=[];if(Object.isString(m))m=new RegExp(RegExp.escape(m));this.each(function(x,A){m.match(x)&&z.push(w.call(t,x,A,this))},this);return z}function v(m){if(Object.isFunction(this.indexOf))if(this.indexOf(m)!=
-1)return true;var w=false;this.each(function(t){if(t==m){w=true;throw $break;}});return w}function o(m,w){w=Object.isUndefined(w)?null:w;return this.eachSlice(m,function(t){for(;t.length<m;)t.push(w);return t})}function u(m,w,t){this.each(function(z,x){m=w.call(t,m,z,x,this)},this);return m}function D(m){var w=$A(arguments).slice(1);return this.map(function(t){return t[m].apply(t,w)})}function E(m,w){m=m||Prototype.K;var t;this.each(function(z,x){z=m.call(w,z,x,this);if(t==null||z>=t)t=z},this);
return t}function J(m,w){m=m||Prototype.K;var t;this.each(function(z,x){z=m.call(w,z,x,this);if(t==null||z<t)t=z},this);return t}function O(m,w){m=m||Prototype.K;var t=[],z=[];this.each(function(x,A){(m.call(w,x,A,this)?t:z).push(x)},this);return[t,z]}function M(m){var w=[];this.each(function(t){w.push(t[m])});return w}function N(m,w){var t=[];this.each(function(z,x){m.call(w,z,x,this)||t.push(z)},this);return t}function T(m,w){return this.map(function(t,z){return{value:t,criteria:m.call(w,t,z,this)}},
this).sort(function(t,z){t=t.criteria;z=z.criteria;return t<z?-1:t>z?1:0}).pluck("value")}function U(){return this.map()}function h(){var m=Prototype.K,w=$A(arguments);if(Object.isFunction(w.last()))m=w.pop();var t=[this].concat(w).map($A);return this.map(function(z,x){return m(t.pluck(x))})}function j(){return this.toArray().length}function s(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:a,eachSlice:b,all:c,every:c,any:e,some:e,collect:g,map:g,detect:k,findAll:l,select:l,filter:l,
grep:p,include:v,member:v,inGroupsOf:o,inject:u,invoke:D,max:E,min:J,partition:O,pluck:M,reject:N,sortBy:T,toArray:U,entries:U,zip:h,size:j,inspect:s,find:k}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=new Array(b);b--;)c[b]=a[b];return c}function $w(a){if(!Object.isString(a))return[];return(a=a.strip())?a.split(/\s+/):[]}Array.from=$A;
(function(){function a(x,A){for(var K=0,L=this.length>>>0;K<L;K++)K in this&&x.call(A,this[K],K,this)}function b(){this.length=0;return this}function c(){return this[0]}function e(){return this[this.length-1]}function g(){return this.select(function(x){return x!=null})}function k(){return this.inject([],function(x,A){if(Object.isArray(A))return x.concat(A.flatten());x.push(A);return x})}function l(){var x=w.call(arguments,0);return this.select(function(A){return!x.include(A)})}function p(x){return(x===
false?this.toArray():this)._reverse()}function v(x){return this.inject([],function(A,K,L){if(0==L||(x?A.last()!=K:!A.include(K)))A.push(K);return A})}function o(x){return this.uniq().findAll(function(A){return x.indexOf(A)!==-1})}function u(){return w.call(this,0)}function D(){return this.length}function E(){return"["+this.map(Object.inspect).join(", ")+"]"}function J(x,A){if(this==null)throw new TypeError;var K=Object(this),L=K.length>>>0;if(L===0)return-1;A=Number(A);if(isNaN(A))A=0;else if(A!==
0&&isFinite(A))A=(A>0?1:-1)*Math.floor(Math.abs(A));if(A>L)return-1;for(A=A>=0?A:Math.max(L-Math.abs(A),0);A<L;A++)if(A in K&&K[A]===x)return A;return-1}function O(x,A){if(this==null)throw new TypeError;var K=Object(this),L=K.length>>>0;if(L===0)return-1;if(Object.isUndefined(A))A=L;else{A=Number(A);if(isNaN(A))A=0;else if(A!==0&&isFinite(A))A=(A>0?1:-1)*Math.floor(Math.abs(A))}for(A=A>=0?Math.min(A,L-1):L-Math.abs(A);A>=0;A--)if(A in K&&K[A]===x)return A;return-1}function M(){var x=[],A=w.call(arguments,
0),K,L=0;A.unshift(this);for(var f=0,n=A.length;f<n;f++){K=A[f];if(Object.isArray(K)&&!("callee"in K))for(var q=0,B=K.length;q<B;q++){if(q in K)x[L]=K[q];L++}else x[L++]=K}x.length=L;return x}function N(x){return function(){if(arguments.length===0)return x.call(this,Prototype.K);else if(arguments[0]===undefined){var A=w.call(arguments,1);A.unshift(Prototype.K);return x.apply(this,A)}else return x.apply(this,arguments)}}function T(x,A){if(this==null)throw new TypeError;x=x||Prototype.K;for(var K=Object(this),
L=[],f=0,n=0,q=K.length>>>0;n<q;n++){if(n in K)L[f]=x.call(A,K[n],n,K);f++}L.length=f;return L}function U(x,A){if(this==null||!Object.isFunction(x))throw new TypeError;for(var K=Object(this),L=[],f,n=0,q=K.length>>>0;n<q;n++)if(n in K){f=K[n];x.call(A,f,n,K)&&L.push(f)}return L}function h(x,A){if(this==null)throw new TypeError;x=x||Prototype.K;for(var K=Object(this),L=0,f=K.length>>>0;L<f;L++)if(L in K&&x.call(A,K[L],L,K))return true;return false}function j(x,A){if(this==null)throw new TypeError;
x=x||Prototype.K;for(var K=Object(this),L=0,f=K.length>>>0;L<f;L++)if(L in K&&!x.call(A,K[L],L,K))return false;return true}function s(x,A,K){A=A||Prototype.K;return z.call(this,A.bind(K),x)}var m=Array.prototype,w=m.slice,t=m.forEach;t||(t=a);if(m.map)T=N(Array.prototype.map);if(m.filter)U=Array.prototype.filter;if(m.some)h=N(Array.prototype.some);if(m.every)j=N(Array.prototype.every);var z=m.reduce;if(!m.reduce)s=Enumerable.inject;Object.extend(m,Enumerable);if(!m._reverse)m._reverse=m.reverse;Object.extend(m,
{_each:t,map:T,collect:T,select:U,filter:U,findAll:U,some:h,any:h,every:j,all:j,inject:s,clear:b,first:c,last:e,compact:g,flatten:k,without:l,reverse:p,uniq:v,intersect:o,clone:u,toArray:u,size:D,inspect:E});if(function(){return[].concat(arguments)[0][0]!==1}(1,2))m.concat=M;if(!m.indexOf)m.indexOf=J;if(!m.lastIndexOf)m.lastIndexOf=O})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(M){this._object=Object.isHash(M)?M.toObject():Object.clone(M)}function b(M,N){for(var T in this._object){var U=this._object[T],h=[T,U];h.key=T;h.value=U;M.call(N,h)}}function c(M,N){return this._object[M]=N}function e(M){if(this._object[M]!==Object.prototype[M])return this._object[M]}function g(M){var N=this._object[M];delete this._object[M];return N}function k(){return Object.clone(this._object)}function l(){return this.pluck("key")}function p(){return this.pluck("value")}
function v(M){var N=this.detect(function(T){return T.value===M});return N&&N.key}function o(M){return this.clone().update(M)}function u(M){return(new Hash(M)).inject(this,function(N,T){N.set(T.key,T.value);return N})}function D(M,N){if(Object.isUndefined(N))return M;N=String.interpret(N);N=N.gsub(/(\r)?\n/,"\r\n");N=encodeURIComponent(N);N=N.gsub(/%20/,"+");return M+"="+N}function E(){return this.inject([],function(M,N){var T=encodeURIComponent(N.key);if((N=N.value)&&typeof N=="object"){if(Object.isArray(N)){for(var U=
[],h=0,j=N.length,s;h<j;h++){s=N[h];U.push(D(T,s))}return M.concat(U)}}else M.push(D(T,N));return M}).join("&")}function J(){return"#<Hash:{"+this.map(function(M){return M.map(Object.inspect).join(": ")}).join(", ")+"}>"}function O(){return new Hash(this)}return{initialize:a,_each:b,set:c,get:e,unset:g,toObject:k,toTemplateReplacements:k,keys:l,values:p,index:v,merge:o,update:u,toQueryString:E,inspect:J,toJSON:k,clone:O}}());Hash.from=$H;
Object.extend(Number.prototype,function(){function a(){return this.toPaddedString(2,16)}function b(){return this+1}function c(v,o){$R(0,this,true).each(v,o);return this}function e(v,o){o=this.toString(o||10);return"0".times(v-o.length)+o}function g(){return Math.abs(this)}function k(){return Math.round(this)}function l(){return Math.ceil(this)}function p(){return Math.floor(this)}return{toColorPart:a,succ:b,times:c,toPaddedString:e,abs:g,round:k,ceil:l,floor:p}}());
function $R(a,b,c){return new ObjectRange(a,b,c)}
var ObjectRange=Class.create(Enumerable,function(){function a(e,g,k){this.start=e;this.end=g;this.exclusive=k}function b(e,g){for(var k=this.start;this.include(k);){e.call(g,k);k=k.succ()}}function c(e){if(e<this.start)return false;if(this.exclusive)return e<this.end;return e<=this.end}return{initialize:a,_each:b,include:c}}()),Abstract={},Try={these:function(){for(var a,b=0,c=arguments.length;b<c;b++){var e=arguments[b];try{a=e();break}catch(g){}}return a}},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},
function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(a,b){this.responders._each(a,b)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,c,e){this.each(function(g){if(Object.isFunction(g[a]))try{g[a].apply(g,[b,c,e])}catch(k){}})}};Object.extend(Ajax.Responders,Enumerable);
Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();if(Object.isHash(this.options.parameters))this.options.parameters=this.options.parameters.toObject()}});
Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,b,c){$super(c);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);if(!["get","post"].include(this.method)){a+=(a?"&":"")+"_method="+this.method;this.method="post"}if(a&&this.method==="get")this.url+=(this.url.include("?")?"&":"?")+a;this.parameters=
a.toQueryParams();try{var b=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?this.options.postBody||a:null;this.transport.send(this.body);!this.options.asynchronous&&
this.transport.overrideMimeType&&this.onStateChange()}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;a>1&&!(a==4&&this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){a["Content-type"]=this.options.contentType+(this.options.encoding?
"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005)a.Connection="close"}if(typeof this.options.requestHeaders=="object"){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var c=0,e=b.length;c<e;c+=2)a[b[c]]=b[c+1];else $H(b).each(function(k){a[k.key]=k.value})}for(var g in a)this.transport.setRequestHeader(g,a[g])},success:function(){var a=this.getStatus();return!a||a>=200&&a<300||a==304},getStatus:function(){try{if(this.transport.status===
1223)return 204;return this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if(a=="Complete"){try{this._complete=true;(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(c){this.dispatchException(c)}var e=b.getHeader("Content-type");if(this.options.evalJS=="force"||this.options.evalJS&&this.isSameOrigin()&&e&&e.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))this.evalResponse()}try{(this.options["on"+
a]||Prototype.emptyFunction)(b,b.headerJSON);Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(g){this.dispatchException(g)}if(a=="Complete")this.transport.onreadystatechange=Prototype.emptyFunction},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(b>2&&!Prototype.Browser.IE||b==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(a.responseText);this.headerJSON=this._getHeaderJSON()}if(b==4){a=a.responseXML;this.responseXML=Object.isUndefined(a)?null:a;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,
getStatusText:function(){try{return this.transport.statusText||""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;try{a=decodeURIComponent(escape(a))}catch(b){}try{return a.evalJSON(this.request.options.sanitizeJSON||
!this.request.isSameOrigin())}catch(c){this.request.dispatchException(c)}},_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||a.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,c,e){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};e=Object.clone(e);var g=e.onComplete;e.onComplete=function(k,l){this.updateContent(k.responseText);Object.isFunction(g)&&g(k,l)}.bind(this);$super(c,e)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],c=this.options;c.evalScripts||(a=a.stripScripts());if(b=$(b))if(c.insertion)if(Object.isString(c.insertion)){var e=
{};e[c.insertion]=a;b.insert(e)}else c.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,c,e){$super(e);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){if(this.options.decay){this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1;this.lastText=a.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
(function(a){function b(d){if(arguments.length>1){for(var i=0,y=[],G=arguments.length;i<G;i++)y.push(b(arguments[i]));return y}if(Object.isString(d))d=document.getElementById(d);return e.extend(d)}function c(d,i){if(d==="select")return false;if("type"in i)return false;return true}function e(d,i){i=i||{};d=d.toLowerCase();if(Oa&&i.name){d="<"+d+' name="'+i.name+'">';delete i.name;return e.writeAttribute(document.createElement(d),i)}pa[d]||(pa[d]=e.extend(document.createElement(d)));d=c(d,i)?pa[d].cloneNode(false):
document.createElement(d);return e.writeAttribute(d,i)}function g(d){d=b(d);var i="<"+d.tagName.toLowerCase(),y,G;for(var V in Ea){y=Ea[V];if(G=(d[V]||"").toString())i+=" "+y+"="+G.inspect(true)}return i+">"}function k(d){return b(d).style.display!=="none"}function l(d,i){d=b(d);if(Object.isUndefined(i))i=!e.visible(d);e[i?"show":"hide"](d);return d}function p(d){d=b(d);d.style.display="none";return d}function v(d){d=b(d);d.style.display="";return d}function o(d){d=b(d);d.parentNode.removeChild(d);
return d}function u(d,i){d=b(d);for(var y=d.getElementsByTagName("*"),G=y.length;G--;)s(y[G]);if(i&&i.toElement)i=i.toElement();if(Object.isElement(i))return d.update().insert(i);i=Object.toHTML(i);G=d.tagName.toUpperCase();if(G==="SCRIPT"&&Pa){d.text=i;return d}if(Qa)if(G in ma.tags){for(;d.firstChild;)d.removeChild(d.firstChild);y=h(G,i.stripScripts());G=0;for(var V;V=y[G];G++)d.appendChild(V)}else if(Fa&&Object.isString(i)&&i.indexOf("<link")>-1){for(;d.firstChild;)d.removeChild(d.firstChild);
y=h(G,i.stripScripts(),true);for(G=0;V=y[G];G++)d.appendChild(V)}else d.innerHTML=i.stripScripts();else d.innerHTML=i.stripScripts();i.evalScripts.bind(i).defer();return d}function D(d,i){d=b(d);if(i&&i.toElement)i=i.toElement();else if(!Object.isElement(i)){i=Object.toHTML(i);var y=d.ownerDocument.createRange();y.selectNode(d);i.evalScripts.bind(i).defer();i=y.createContextualFragment(i.stripScripts())}d.parentNode.replaceChild(i,d);return d}function E(d,i){d=b(d);if(i&&i.toElement)i=i.toElement();
if(Object.isElement(i)){d.parentNode.replaceChild(i,d);return d}i=Object.toHTML(i);var y=d.parentNode,G=y.tagName.toUpperCase();if(G in ma.tags){var V=e.next(d);G=h(G,i.stripScripts());y.removeChild(d);G.each(V?function(aa){y.insertBefore(aa,V)}:function(aa){y.appendChild(aa)})}else d.outerHTML=i.stripScripts();i.evalScripts.bind(i).defer();return d}function J(d){if(Object.isUndefined(d)||d===null)return false;if(Object.isString(d)||Object.isNumber(d))return true;if(Object.isElement(d))return true;
if(d.toElement||d.toHTML)return true;return false}function O(d,i,y){y=y.toLowerCase();var G=ma[y];if(i&&i.toElement)i=i.toElement();if(Object.isElement(i)){G(d,i);return d}i=Object.toHTML(i);var V=(y==="before"||y==="after"?d.parentNode:d).tagName.toUpperCase();V=h(V,i.stripScripts());if(y==="top"||y==="after")V.reverse();y=0;for(var aa;aa=V[y];y++)G(d,aa);i.evalScripts.bind(i).defer()}function M(d,i){d=b(d);if(J(i))i={bottom:i};for(var y in i)O(d,i[y],y);return d}function N(d,i,y){d=b(d);if(Object.isElement(i))b(i).writeAttribute(y||
{});else i=Object.isString(i)?new e(i,y):new e("div",i);d.parentNode&&d.parentNode.replaceChild(i,d);i.appendChild(d);return i}function T(d){d=b(d);for(var i=d.firstChild;i;){var y=i.nextSibling;i.nodeType===Node.TEXT_NODE&&!/\S/.test(i.nodeValue)&&d.removeChild(i);i=y}return d}function U(d){return b(d).innerHTML.blank()}function h(d,i,y){var G=ma.tags[d];d=Z;var V=!!G;if(!V&&y){V=true;G=["","",0]}if(V){d.innerHTML="&#160;"+G[0]+i+G[1];d.removeChild(d.firstChild);for(i=G[2];i--;)d=d.firstChild}else d.innerHTML=
i;return $A(d.childNodes)}function j(d,i){if(d=b(d)){d=d.cloneNode(i);if(!qa){d._prototypeUID=ta;if(i){i=e.select(d,"*");for(var y=i.length;y--;)i[y]._prototypeUID=ta}}return e.extend(d)}}function s(d){var i=ka(d);if(i){e.stopObserving(d);if(!qa)d._prototypeUID=ta;delete e.Storage[i]}}function m(d){for(var i=d.length;i--;)s(d[i])}function w(d){for(var i=d.length,y;i--;){y=d[i];y=ka(y);delete e.Storage[y];delete Event.cache[y]}}function t(d){if(d=b(d)){s(d);d=d.getElementsByTagName("*");for(var i=
d.length;i--;)s(d[i]);return null}}function z(d,i,y){d=b(d);y=y||-1;for(var G=[];d=d[i];){d.nodeType===Node.ELEMENT_NODE&&G.push(e.extend(d));if(G.length===y)break}return G}function x(d){return z(d,"parentNode")}function A(d){return e.select(d,"*")}function K(d){for(d=b(d).firstChild;d&&d.nodeType!==Node.ELEMENT_NODE;)d=d.nextSibling;return b(d)}function L(d){var i=[];for(d=b(d).firstChild;d;){d.nodeType===Node.ELEMENT_NODE&&i.push(e.extend(d));d=d.nextSibling}return i}function f(d){return z(d,"previousSibling")}
function n(d){return z(d,"nextSibling")}function q(d){d=b(d);var i=f(d);d=n(d);return i.reverse().concat(d)}function B(d,i){d=b(d);if(Object.isString(i))return Prototype.Selector.match(d,i);return i.match(d)}function I(d,i,y,G){d=b(d);y=y||0;G=G||0;if(Object.isNumber(y)){G=y;y=null}for(;d=d[i];)if(d.nodeType===1)if(!(y&&!Prototype.Selector.match(d,y)))if(!(--G>=0))return e.extend(d)}function Q(d,i,y){d=b(d);if(arguments.length===1)return b(d.parentNode);return I(d,"parentNode",i,y)}function F(d,i,
y){d=b(d);i=i||0;y=y||0;if(Object.isNumber(i)){y=i;i="*"}d=Prototype.Selector.select(i,d)[y];return e.extend(d)}function P(d,i,y){return I(d,"previousSibling",i,y)}function W(d,i,y){return I(d,"nextSibling",i,y)}function R(d){d=b(d);var i=Ga.call(arguments,1).join(", ");return Prototype.Selector.select(i,d)}function fa(d){d=b(d);for(var i=Ga.call(arguments,1).join(", "),y=e.siblings(d),G=[],V=0,aa;aa=y[V];V++)Prototype.Selector.match(aa,i)&&G.push(aa);return G}function ba(d,i){d=b(d);for(i=b(i);d=
d.parentNode;)if(d===i)return true;return false}function ha(d,i){d=b(d);i=b(i);if(!i.contains)return ba(d,i);return i.contains(d)&&i!==d}function ja(d,i){d=b(d);i=b(i);return(d.compareDocumentPosition(i)&8)===8}function ua(d){d=b(d);var i=e.readAttribute(d,"id");if(i)return i;do i="anonymous_element_"+Ra++;while(b(i));e.writeAttribute(d,"id",i);return i}function na(d,i){return b(d).getAttribute(i)}function va(d,i){d=b(d);var y=ga.read;if(y.values[i])return y.values[i](d,i);if(y.names[i])i=y.names[i];
if(i.include(":")){if(!d.attributes||!d.attributes[i])return null;return d.attributes[i].value}return d.getAttribute(i)}function wa(d,i){if(i==="title")return d.title;return d.getAttribute(i)}function r(d,i,y){d=b(d);var G={},V=ga.write;if(typeof i==="object")G=i;else G[i]=Object.isUndefined(y)?true:y;for(var aa in G){i=V.names[aa]||aa;y=G[aa];if(V.values[aa])i=V.values[aa](d,y);if(y===false||y===null)d.removeAttribute(i);else y===true?d.setAttribute(i,i):d.setAttribute(i,y)}return d}function C(d,
i){i=ga.has[i]||i;d=b(d).getAttributeNode(i);return!!(d&&d.specified)}function H(d){return new e.ClassNames(d)}function S(d){if(xa[d])return xa[d];var i=new RegExp("(^|\\s+)"+d+"(\\s+|$)");return xa[d]=i}function X(d,i){if(d=b(d)){d=d.className;if(d.length===0)return false;if(d===i)return true;return S(i).test(d)}}function Sa(d,i){if(d=b(d)){X(d,i)||(d.className+=(d.className?" ":"")+i);return d}}function Ta(d,i){if(d=b(d)){d.className=d.className.replace(S(i)," ").strip();return d}}function Ua(d,
i,y){if(d=b(d)){if(Object.isUndefined(y))y=!X(d,i);return e[y?"addClassName":"removeClassName"](d,i)}}function Va(d,i){return d.getAttribute(i)}function Ha(d,i){return d.getAttribute(i,2)}function Wa(d,i){return(d=d.getAttributeNode(i))?d.value:""}function ra(d,i){return b(d).hasAttribute(i)?i:null}function Xa(d){if(d==="float"||d==="styleFloat")return"cssFloat";return d.camelize()}function Ya(d){if(d==="float"||d==="cssFloat")return"styleFloat";return d.camelize()}function Za(d,i){d=b(d);var y=d.style;
if(Object.isString(i)){y.cssText+=";"+i;if(i.include("opacity")){i=i.match(/opacity:\s*(\d?\.?\d*)/)[1];e.setOpacity(d,i)}return d}for(var G in i)if(G==="opacity")e.setOpacity(d,i[G]);else{var V=i[G];if(G==="float"||G==="cssFloat")G=Object.isUndefined(y.styleFloat)?"cssFloat":"styleFloat";y[G]=V}return d}function $a(d,i){d=b(d);i=Xa(i);var y=d.style[i];if(!y||y==="auto")y=(d=document.defaultView.getComputedStyle(d,null))?d[i]:null;if(i==="opacity")return y?parseFloat(y):1;return y==="auto"?null:y}
function ab(d,i){d=b(d);i=Ya(i);var y=d.style[i];if(!y&&d.currentStyle)y=d.currentStyle[i];if(i==="opacity"&&!ya)return Ia(d);if(y==="auto"){if((i==="width"||i==="height")&&e.visible(d))return e.measure(d,i)+"px";return null}return y}function Ja(d){return(d||"").replace(/alpha\([^\)]*\)/gi,"")}function bb(d){if(!d.currentStyle||!d.currentStyle.hasLayout)d.style.zoom=1;return d}function Ka(d,i){d=b(d);if(i==1||i==="")i="";else if(i<1.0E-5)i=0;d.style.opacity=i;return d}function cb(d,i){if(ya)return Ka(d,
i);d=bb(b(d));var y=e.getStyle(d,"filter"),G=d.style;if(i==1||i===""){if(y=Ja(y))G.filter=y;else G.removeAttribute("filter");return d}if(i<1.0E-5)i=0;G.filter=Ja(y)+"alpha(opacity="+i*100+")";return d}function La(d){return e.getStyle(d,"opacity")}function Ia(d){if(ya)return La(d);d=e.getStyle(d,"filter");if(d.length===0)return 1;d=(d||"").match(/alpha\(opacity=(.*)\)/);if(d[1])return parseFloat(d[1])/100;return 1}function ka(d){if(d===window)return 0;if(typeof d._prototypeUID==="undefined")d._prototypeUID=
e.Storage.UID++;return d._prototypeUID}function db(d){if(d===window)return 0;if(d==document)return 1;return d.uniqueID}function za(d){if(d=b(d)){d=ka(d);e.Storage[d]||(e.Storage[d]=$H());return e.Storage[d]}}function eb(d,i,y){if(d=b(d)){var G=za(d);arguments.length===2?G.update(i):G.set(i,y);return d}}function fb(d,i,y){if(d=b(d)){d=za(d);var G=d.get(i);if(Object.isUndefined(G)){d.set(i,y);G=y}return G}}function gb(d){if(typeof window.Element==="undefined")return false;var i=window.Element.prototype;
if(i){var y="_"+(Math.random()+"").slice(2);d=document.createElement(d);i[y]="x";d=d[y]!=="x";delete i[y];return d}return false}function sa(d,i){for(var y in i){var G=i[y];if(Object.isFunction(G)&&!(y in d))d[y]=G.methodize()}}function Ma(d){return ka(d)in Aa}function Ba(d){if(!d||Ma(d))return d;if(d.nodeType!==Node.ELEMENT_NODE||d==window)return d;var i=Object.clone(Ca),y=d.tagName.toUpperCase();la[y]&&Object.extend(i,la[y]);sa(d,i);Aa[ka(d)]=true;return d}function hb(d){if(!d||Ma(d))return d;var i=
d.tagName;if(i&&/^(?:object|applet|embed)$/i.test(i)){sa(d,e.Methods);sa(d,e.Methods.Simulated);sa(d,e.Methods.ByTag[i.toUpperCase()])}return d}function Na(d,i){d=d.toUpperCase();la[d]||(la[d]={});Object.extend(la[d],i)}function Da(d,i,y){if(Object.isUndefined(y))y=false;for(var G in i){var V=i[G];if(Object.isFunction(V))if(!y||!(G in d))d[G]=V.methodize()}}function ib(d){var i,y={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",
H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(y[d])i="HTML"+y[d]+"Element";if(window[i])return window[i];i="HTML"+d+"Element";if(window[i])return window[i];i="HTML"+d.capitalize()+"Element";if(window[i])return window[i];
d=document.createElement(d);return d.__proto__||d.constructor.prototype}function jb(d){arguments.length===0&&kb();if(arguments.length===2){var i=d;d=arguments[1]}if(i)if(Object.isArray(i))for(var y=0,G;G=i[y];y++)Na(G,d);else Na(i,d);else Object.extend(e.Methods,d||{});i=window.HTMLElement?HTMLElement.prototype:e.prototype;if(oa.ElementExtensions){Da(i,e.Methods);Da(i,e.Methods.Simulated,true)}if(oa.SpecificElementExtensions)for(G in e.Methods.ByTag){i=ib(G);Object.isUndefined(i)||Da(i.prototype,
la[G])}Object.extend(e,e.Methods);Object.extend(e,e.Methods.Simulated);delete e.ByTag;delete e.Simulated;e.extend.refresh();pa={}}function kb(){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(e.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)})}var ta,Ga=Array.prototype.slice,Z=document.createElement("div");
a.$=b;if(!a.Node)a.Node={};a.Node.ELEMENT_NODE||Object.extend(a.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});var pa={},Oa=function(){try{var d=document.createElement('<input name="x">');return d.tagName.toLowerCase()==="input"&&d.name==="x"}catch(i){return false}}(),ca=a.Element;a.Element=e;Object.extend(a.Element,
ca||{});if(ca)a.Element.prototype=ca.prototype;e.Methods={ByTag:{},Simulated:{}};ca={};var Ea={id:"id",className:"class"};ca.inspect=g;Object.extend(ca,{visible:k,toggle:l,hide:p,show:v});var da=function(){var d=document.createElement("select"),i=true;d.innerHTML='<option value="test">test</option>';if(d.options&&d.options[0])i=d.options[0].nodeName.toUpperCase()!=="OPTION";return i}(),ia=function(){try{var d=document.createElement("table");if(d&&d.tBodies){d.innerHTML="<tbody><tr><td>test</td></tr></tbody>";
return typeof d.tBodies[0]=="undefined"}}catch(i){return true}}(),Fa=function(){try{var d=document.createElement("div");d.innerHTML="<link />";return d.childNodes.length===0}catch(i){return true}}(),Qa=da||ia||Fa,Pa=function(){var d=document.createElement("script"),i=false;try{d.appendChild(document.createTextNode(""));i=!d.firstChild||d.firstChild&&d.firstChild.nodeType!==3}catch(y){i=true}return i}(),ma={before:function(d,i){d.parentNode.insertBefore(i,d)},top:function(d,i){d.insertBefore(i,d.firstChild)},
bottom:function(d,i){d.appendChild(i)},after:function(d,i){d.parentNode.insertBefore(i,d.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};da=ma.tags;Object.extend(da,{THEAD:da.TBODY,TFOOT:da.TBODY,TH:da.TD});if("outerHTML"in document.documentElement)D=E;if(qa)m=w;Object.extend(ca,{remove:o,update:u,replace:D,
insert:M,wrap:N,cleanWhitespace:T,empty:U,clone:j,purge:t});Object.extend(ca,{recursivelyCollect:z,ancestors:x,descendants:A,firstDescendant:K,immediateDescendants:L,previousSiblings:f,nextSiblings:n,siblings:q,match:B,up:Q,down:F,previous:P,next:W,select:R,adjacent:fa,descendantOf:Z.compareDocumentPosition?ja:Z.contains?ha:ba,getElementsBySelector:R,childElements:L});var Ra=1;if(function(){Z.setAttribute("onclick",Prototype.emptyFunction);var d=typeof Z.getAttribute("onclick")==="function";Z.removeAttribute("onclick");
return d}())na=va;else if(Prototype.Browser.Opera)na=wa;a.Element.Methods.Simulated.hasAttribute=C;var xa={},ga={};da="className";ia="for";Z.setAttribute(da,"x");if(Z.className!=="x"){Z.setAttribute("class","x");if(Z.className==="x")da="class"}var ea=document.createElement("label");ea.setAttribute(ia,"x");if(ea.htmlFor!=="x"){ea.setAttribute("htmlFor","x");if(ea.htmlFor==="x")ia="htmlFor"}ea=null;Z.onclick=Prototype.emptyFunction;ea=Z.getAttribute("onclick");var Y;if(String(ea).indexOf("{")>-1)Y=
function(d,i){d=d.getAttribute(i);if(!d)return null;d=d.toString();d=d.split("{")[1];d=d.split("}")[0];return d.strip()};else if(ea==="")Y=function(d,i){d=d.getAttribute(i);if(!d)return null;return d.strip()};ga.read={names:{"class":da,className:da,"for":ia,htmlFor:ia},values:{style:function(d){return d.style.cssText.toLowerCase()},title:function(d){return d.title}}};ga.write={names:{className:"class",htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(d,i){d.checked=
!!i},style:function(d,i){d.style.cssText=i?i:""}}};ga.has={names:{}};Object.extend(ga.write.names,ga.read.names);da=$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder");for(ia=0;ea=da[ia];ia++){ga.write.names[ea.toLowerCase()]=ea;ga.has.names[ea.toLowerCase()]=ea}Object.extend(ga.read.values,{href:Ha,src:Ha,type:Va,action:Wa,disabled:ra,checked:ra,readonly:ra,multiple:ra,onload:Y,onunload:Y,onclick:Y,ondblclick:Y,onmousedown:Y,onmouseup:Y,onmouseover:Y,
onmousemove:Y,onmouseout:Y,onfocus:Y,onblur:Y,onkeypress:Y,onkeydown:Y,onkeyup:Y,onsubmit:Y,onreset:Y,onselect:Y,onchange:Y});Object.extend(ca,{identify:ua,readAttribute:na,writeAttribute:r,classNames:H,hasClassName:X,addClassName:Sa,removeClassName:Ta,toggleClassName:Ua});var ya=function(){Z.style.cssText="opacity:.55";return/^0.55/.test(Z.style.opacity)}();Object.extend(ca,{setStyle:Za,getStyle:$a,setOpacity:Ka,getOpacity:La});if("styleFloat"in Z.style){ca.getStyle=ab;ca.setOpacity=cb;ca.getOpacity=
Ia}a.Element.Storage={UID:1};var qa="uniqueID"in Z;if(qa)ka=db;Object.extend(ca,{getStorage:za,store:eb,retrieve:fb});var Ca={},la=e.Methods.ByTag,oa=Prototype.BrowserFeatures;if(!oa.ElementExtensions&&"__proto__"in Z){a.HTMLElement={};a.HTMLElement.prototype=Z.__proto__;oa.ElementExtensions=true}Y=gb("object");var Aa={};if(oa.SpecificElementExtensions)Ba=Y?hb:Prototype.K;Object.extend(a.Element,{extend:Ba,addMethods:jb});a.Element.extend.refresh=Ba===Prototype.K?Prototype.emptyFunction:function(){if(!Prototype.BrowserFeatures.ElementExtensions){Object.extend(Ca,
e.Methods);Object.extend(Ca,e.Methods.Simulated);Aa={}}};e.addMethods(ca)})(this);
(function(){function a(f){f=f.match(/^(\d+)%?$/i);if(!f)return null;return Number(f[1])/100}function b(f,n){f=$(f);var q=f.style[n];if(!q||q==="auto")q=(f=document.defaultView.getComputedStyle(f,null))?f[n]:null;if(n==="opacity")return q?parseFloat(q):1;return q==="auto"?null:q}function c(f,n){var q=f.style[n];if(!q&&f.currentStyle)q=f.currentStyle[n];return q}function e(f,n){var q=f.offsetWidth,B=g(f,"borderLeftWidth",n)||0,I=g(f,"borderRightWidth",n)||0,Q=g(f,"paddingLeft",n)||0;f=g(f,"paddingRight",
n)||0;return q-B-I-Q-f}function g(f,n,q){var B=null;if(Object.isElement(f)){B=f;f=b(B,n)}if(f===null||Object.isUndefined(f))return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(f))return window.parseFloat(f);var I=f.include("%"),Q=q===document.viewport;if(/\d/.test(f)&&B&&B.runtimeStyle&&!(I&&Q)){q=B.style.left;n=B.runtimeStyle.left;B.runtimeStyle.left=B.currentStyle.left;B.style.left=f||0;f=B.style.pixelLeft;B.style.left=q;B.runtimeStyle.left=n;return f}if(B&&I){q=q||B.parentNode;f=a(f);B=null;I=n.include("left")||
n.include("right")||n.include("width");n=n.include("top")||n.include("bottom")||n.include("height");if(q===document.viewport)if(I)B=document.viewport.getWidth();else{if(n)B=document.viewport.getHeight()}else if(I)B=$(q).measure("width");else if(n)B=$(q).measure("height");return B===null?0:B*f}return 0}function k(f){for(;f&&f.parentNode;){if(f.getStyle("display")==="none")return false;f=$(f.parentNode)}return true}function l(f){if(f.include("border"))f+="-width";return f.camelize()}function p(f,n){return new Element.Layout(f,
n)}function v(f,n){return $(f).getLayout().get(n)}function o(f){return Element.getDimensions(f).height}function u(f){return Element.getDimensions(f).width}function D(f){f=$(f);var n=Element.getStyle(f,"display");if(n&&n!=="none")return{width:f.offsetWidth,height:f.offsetHeight};n=f.style;n={visibility:n.visibility,position:n.position,display:n.display};var q={visibility:"hidden",display:"block"};if(n.position!=="fixed")q.position="absolute";Element.setStyle(f,q);q={width:f.offsetWidth,height:f.offsetHeight};
Element.setStyle(f,n);return q}function E(f){f=$(f);if(A(f)||K(f)||z(f)||x(f))return $(document.body);if(Element.getStyle(f,"display")!=="inline"&&f.offsetParent)return $(f.offsetParent);for(;(f=f.parentNode)&&f!==document.body;)if(Element.getStyle(f,"position")!=="static")return x(f)?$(document.body):$(f);return $(document.body)}function J(f){f=$(f);var n=0,q=0;if(f.parentNode){do{n+=f.offsetTop||0;q+=f.offsetLeft||0;f=f.offsetParent}while(f)}return new Element.Offset(q,n)}function O(f){f=$(f);var n=
f.getLayout(),q=0,B=0;do{q+=f.offsetTop||0;B+=f.offsetLeft||0;if(f=f.offsetParent){if(z(f))break;if(Element.getStyle(f,"position")!=="static")break}}while(f);B-=n.get("margin-top");q-=n.get("margin-left");return new Element.Offset(B,q)}function M(f){var n=0,q=0;do{n+=f.scrollTop||0;q+=f.scrollLeft||0;f=f.parentNode}while(f);return new Element.Offset(q,n)}function N(f){var n=0,q=0,B=document.body,I=$(f);do{n+=I.offsetTop||0;q+=I.offsetLeft||0;if(I.offsetParent==B&&Element.getStyle(I,"position")=="absolute")break}while(I=
I.offsetParent);I=f;do if(I!=B){n-=I.scrollTop||0;q-=I.scrollLeft||0}while(I=I.parentNode);return new Element.Offset(q,n)}function T(f){f=$(f);if(Element.getStyle(f,"position")==="absolute")return f;var n=E(f),q=f.viewportOffset();n=n.viewportOffset();q=q.relativeTo(n);n=f.getLayout();f.store("prototype_absolutize_original_styles",{left:f.getStyle("left"),top:f.getStyle("top"),width:f.getStyle("width"),height:f.getStyle("height")});f.setStyle({position:"absolute",top:q.top+"px",left:q.left+"px",width:n.get("width")+
"px",height:n.get("height")+"px"});return f}function U(f){f=$(f);if(Element.getStyle(f,"position")==="relative")return f;var n=f.retrieve("prototype_absolutize_original_styles");n&&f.setStyle(n);return f}function h(f){f=$(f);var n=Element.cumulativeOffset(f);window.scrollTo(n.left,n.top);return f}function j(f){f=$(f);var n=Element.getStyle(f,"position"),q={};if(n==="static"||!n){q.position="relative";if(Prototype.Browser.Opera){q.top=0;q.left=0}Element.setStyle(f,q);Element.store(f,"prototype_made_positioned",
true)}return f}function s(f){f=$(f);var n=Element.getStorage(f);if(n.get("prototype_made_positioned")){n.unset("prototype_made_positioned");Element.setStyle(f,{position:"",top:"",bottom:"",left:"",right:""})}return f}function m(f){f=$(f);var n=Element.getStorage(f),q=n.get("prototype_made_clipping");if(Object.isUndefined(q)){q=Element.getStyle(f,"overflow");n.set("prototype_made_clipping",q);if(q!=="hidden")f.style.overflow="hidden"}return f}function w(f){f=$(f);var n=Element.getStorage(f),q=n.get("prototype_made_clipping");
if(!Object.isUndefined(q)){n.unset("prototype_made_clipping");f.style.overflow=q||""}return f}function t(f,n,q){q=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},q||{});n=$(n);f=$(f);var B,I,Q,F={};if(q.setLeft||q.setTop){B=Element.viewportOffset(n);I=[0,0];if(Element.getStyle(f,"position")==="absolute"){var P=Element.getOffsetParent(f);if(P!==document.body)I=Element.viewportOffset(P)}}if(q.setWidth||q.setHeight)Q=Element.getLayout(n);if(q.setLeft)F.left=
B[0]-I[0]+q.offsetLeft+"px";if(q.setTop)F.top=B[1]-I[1]+q.offsetTop+"px";if(q.setWidth)F.width=Q.get("border-box-width")+"px";if(q.setHeight)F.height=Q.get("border-box-height")+"px";return Element.setStyle(f,F)}function z(f){return f.nodeName.toUpperCase()==="BODY"}function x(f){return f.nodeName.toUpperCase()==="HTML"}function A(f){return f.nodeType===Node.DOCUMENT_NODE}function K(f){return f!==document.body&&!Element.descendantOf(f,document.body)}if("currentStyle"in document.documentElement)b=c;
var L=Prototype.K;if("currentStyle"in document.documentElement)L=function(f){if(!f.currentStyle.hasLayout)f.style.zoom=1;return f};Element.Layout=Class.create(Hash,{initialize:function($super,n,q){$super();this.element=$(n);Element.Layout.PROPERTIES.each(function(B){this._set(B,null)},this);if(q){this._preComputing=true;this._begin();Element.Layout.PROPERTIES.each(this._compute,this);this._end();this._preComputing=false}},_set:function(f,n){return Hash.prototype.set.call(this,f,n)},set:function(){throw"Properties of Element.Layout are read-only.";
},get:function($super,n){var q=$super(n);return q===null?this._compute(n):q},_begin:function(){if(!this._isPrepared()){var f=this.element;if(!k(f)){f.store("prototype_original_styles",{position:f.style.position||"",width:f.style.width||"",visibility:f.style.visibility||"",display:f.style.display||""});var n=b(f,"position"),q=f.offsetWidth;if(q===0||q===null){f.style.display="block";q=f.offsetWidth}var B=n==="fixed"?document.viewport:f.parentNode,I={visibility:"hidden",display:"block"};if(n!=="fixed")I.position=
"absolute";f.setStyle(I);I=f.offsetWidth;n=q&&I===q?e(f,B):n==="absolute"||n==="fixed"?e(f,B):$(f.parentNode).getLayout().get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right");f.setStyle({width:n+"px"})}this._setPrepared(true)}},_end:function(){var f=this.element,n=f.retrieve("prototype_original_styles");f.store("prototype_original_styles",null);f.setStyle(n);this._setPrepared(false)},_compute:function(f){var n=
Element.Layout.COMPUTATIONS;if(!(f in n))throw"Property not found.";return this._set(f,n[f].call(this,this.element))},_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",false)},_setPrepared:function(f){return this.element.store("prototype_element_layout_prepared",f)},toObject:function(){var f=$A(arguments),n={};(f.length===0?Element.Layout.PROPERTIES:f.join(" ").split(" ")).each(function(q){if(Element.Layout.PROPERTIES.include(q)){var B=this.get(q);if(B!=null)n[q]=
B}},this);return n},toHash:function(){var f=this.toObject.apply(this,arguments);return new Hash(f)},toCSS:function(){var f=$A(arguments),n={};(f.length===0?Element.Layout.PROPERTIES:f.join(" ").split(" ")).each(function(q){if(Element.Layout.PROPERTIES.include(q))if(!Element.Layout.COMPOSITE_PROPERTIES.include(q)){var B=this.get(q);if(B!=null)n[l(q)]=B+"px"}},this);return n},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),
COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(){this._preComputing||this._begin();var f=this.get("border-box-height");if(f<=0){this._preComputing||this._end();return 0}var n=this.get("border-top"),q=this.get("border-bottom"),B=this.get("padding-top"),I=this.get("padding-bottom");this._preComputing||this._end();return f-n-q-B-I},width:function(){this._preComputing||this._begin();var f=
this.get("border-box-width");if(f<=0){this._preComputing||this._end();return 0}var n=this.get("border-left"),q=this.get("border-right"),B=this.get("padding-left"),I=this.get("padding-right");this._preComputing||this._end();return f-n-q-B-I},"padding-box-height":function(){var f=this.get("height"),n=this.get("padding-top"),q=this.get("padding-bottom");return f+n+q},"padding-box-width":function(){var f=this.get("width"),n=this.get("padding-left"),q=this.get("padding-right");return f+n+q},"border-box-height":function(f){this._preComputing||
this._begin();f=f.offsetHeight;this._preComputing||this._end();return f},"border-box-width":function(f){this._preComputing||this._begin();f=f.offsetWidth;this._preComputing||this._end();return f},"margin-box-height":function(){var f=this.get("border-box-height"),n=this.get("margin-top"),q=this.get("margin-bottom");if(f<=0)return 0;return f+n+q},"margin-box-width":function(){var f=this.get("border-box-width"),n=this.get("margin-left"),q=this.get("margin-right");if(f<=0)return 0;return f+n+q},top:function(f){return f.positionedOffset().top},
bottom:function(f){var n=f.positionedOffset();f=f.getOffsetParent().measure("height");var q=this.get("border-box-height");return f-q-n.top},left:function(f){return f.positionedOffset().left},right:function(f){var n=f.positionedOffset();f=f.getOffsetParent().measure("width");var q=this.get("border-box-width");return f-q-n.left},"padding-top":function(f){return g(f,"paddingTop")},"padding-bottom":function(f){return g(f,"paddingBottom")},"padding-left":function(f){return g(f,"paddingLeft")},"padding-right":function(f){return g(f,
"paddingRight")},"border-top":function(f){return g(f,"borderTopWidth")},"border-bottom":function(f){return g(f,"borderBottomWidth")},"border-left":function(f){return g(f,"borderLeftWidth")},"border-right":function(f){return g(f,"borderRightWidth")},"margin-top":function(f){return g(f,"marginTop")},"margin-bottom":function(f){return g(f,"marginBottom")},"margin-left":function(f){return g(f,"marginLeft")},"margin-right":function(f){return g(f,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&
Object.extend(Element.Layout.COMPUTATIONS,{right:function(f){var n=L(f.getOffsetParent());f=f.getBoundingClientRect();return(n.getBoundingClientRect().right-f.right).round()},bottom:function(f){var n=L(f.getOffsetParent());f=f.getBoundingClientRect();return(n.getBoundingClientRect().bottom-f.bottom).round()}});Element.Offset=Class.create({initialize:function(f,n){this.left=f.round();this.top=n.round();this[0]=this.left;this[1]=this.top},relativeTo:function(f){return new Element.Offset(this.left-f.left,
this.top-f.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});if(Prototype.Browser.IE){E=E.wrap(function(f,n){n=$(n);if(A(n)||K(n)||z(n)||x(n))return $(document.body);var q=n.getStyle("position");if(q!=="static")return f(n);n.setStyle({position:"relative"});f=f(n);n.setStyle({position:q});return f});O=O.wrap(function(f,n){n=$(n);if(!n.parentNode)return new Element.Offset(0,
0);var q=n.getStyle("position");if(q!=="static")return f(n);var B=n.getOffsetParent();B&&B.getStyle("position")==="fixed"&&L(B);n.setStyle({position:"relative"});f=f(n);n.setStyle({position:q});return f})}else if(Prototype.Browser.Webkit)J=function(f){f=$(f);var n=0,q=0;do{n+=f.offsetTop||0;q+=f.offsetLeft||0;if(f.offsetParent==document.body)if(Element.getStyle(f,"position")=="absolute")break;f=f.offsetParent}while(f);return new Element.Offset(q,n)};Element.addMethods({getLayout:p,measure:v,getWidth:u,
getHeight:o,getDimensions:D,getOffsetParent:E,cumulativeOffset:J,positionedOffset:O,cumulativeScrollOffset:M,viewportOffset:N,absolutize:T,relativize:U,scrollTo:h,makePositioned:j,undoPositioned:s,makeClipping:m,undoClipping:w,clonePosition:t});"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(f){f=$(f);if(K(f))return new Element.Offset(0,0);f=f.getBoundingClientRect();var n=document.documentElement;return new Element.Offset(f.left-n.clientLeft,f.top-
n.clientTop)}})})();
(function(){function a(){if(l)return l;return l=k?document.body:document.documentElement}function b(){return{width:this.getWidth(),height:this.getHeight()}}function c(){return a().clientWidth}function e(){return a().clientHeight}function g(){return new Element.Offset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}var k=Prototype.Browser.Opera&&window.parseFloat(window.opera.version())<9.5,
l=null;document.viewport={getDimensions:b,getWidth:c,getHeight:e,getScrollOffsets:g}})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(){throw new Error('Method "Prototype.Selector.select" must be defined.');}function b(){throw new Error('Method "Prototype.Selector.match" must be defined.');}function c(k,l,p){p=p||0;var v=Prototype.Selector.match,o=k.length,u=0,D;for(D=0;D<o;D++)if(v(k[D],l)&&p==u++)return Element.extend(k[D])}function e(k){for(var l=0,p=k.length;l<p;l++)Element.extend(k[l]);return k}var g=Prototype.K;return{select:a,match:b,find:c,extendElements:Element.extend===g?g:e,extendElement:Element.extend}}();
(function(){function a(h,j,s,m,w,t){w=0;for(var z=m.length;w<z;w++){var x=m[w];if(x){var A=false;for(x=x[h];x;){if(x.sizcache===s){A=m[x.sizset];break}if(x.nodeType===1&&!t){x.sizcache=s;x.sizset=w}if(x.nodeName.toLowerCase()===j){A=x;break}x=x[h]}m[w]=A}}}function b(h,j,s,m,w,t){w=0;for(var z=m.length;w<z;w++){var x=m[w];if(x){var A=false;for(x=x[h];x;){if(x.sizcache===s){A=m[x.sizset];break}if(x.nodeType===1){if(!t){x.sizcache=s;x.sizset=w}if(typeof j!=="string"){if(x===j){A=true;break}}else if(o.filter(j,
[x]).length>0){A=x;break}}x=x[h]}m[w]=A}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,g=Object.prototype.toString,k=false,l=true,p=/\\/g,v=/\W/;[0,0].sort(function(){l=false;return 0});var o=function(h,j,s,m){s=s||[];var w=j=j||document;if(j.nodeType!==1&&j.nodeType!==9)return[];if(!h||typeof h!=="string")return s;var t,z,x,A,K,L=true,f=o.isXML(j),n=[],q=h;do{c.exec("");if(t=c.exec(q)){q=t[3];n.push(t[1]);
if(t[2]){A=t[3];break}}}while(t);if(n.length>1&&D.exec(h))if(n.length===2&&u.relative[n[0]])z=U(n[0]+n[1],j);else for(z=u.relative[n[0]]?[j]:o(n.shift(),j);n.length;){h=n.shift();if(u.relative[h])h+=n.shift();z=U(h,z)}else{if(!m&&n.length>1&&j.nodeType===9&&!f&&u.match.ID.test(n[0])&&!u.match.ID.test(n[n.length-1])){t=o.find(n.shift(),j,f);j=t.expr?o.filter(t.expr,t.set)[0]:t.set[0]}if(j){t=m?{expr:n.pop(),set:O(m)}:o.find(n.pop(),n.length===1&&(n[0]==="~"||n[0]==="+")&&j.parentNode?j.parentNode:
j,f);z=t.expr?o.filter(t.expr,t.set):t.set;if(n.length>0)x=O(z);else L=false;for(;n.length;){t=K=n.pop();if(u.relative[K])t=n.pop();else K="";if(t==null)t=j;u.relative[K](x,t,f)}}else x=[]}x||(x=z);x||o.error(K||h);if(g.call(x)==="[object Array]")if(L)if(j&&j.nodeType===1)for(h=0;x[h]!=null;h++){if(x[h]&&(x[h]===true||x[h].nodeType===1&&o.contains(j,x[h])))s.push(z[h])}else for(h=0;x[h]!=null;h++)x[h]&&x[h].nodeType===1&&s.push(z[h]);else s.push.apply(s,x);else O(x,s);if(A){o(A,w,s,m);o.uniqueSort(s)}return s};
o.uniqueSort=function(h){if(N){k=l;h.sort(N);if(k)for(var j=1;j<h.length;j++)h[j]===h[j-1]&&h.splice(j--,1)}return h};o.matches=function(h,j){return o(h,null,null,j)};o.matchesSelector=function(h,j){return o(j,null,null,[h]).length>0};o.find=function(h,j,s){var m;if(!h)return[];for(var w=0,t=u.order.length;w<t;w++){var z,x=u.order[w];if(z=u.leftMatch[x].exec(h)){var A=z[1];z.splice(1,1);if(A.substr(A.length-1)!=="\\"){z[1]=(z[1]||"").replace(p,"");m=u.find[x](z,j,s);if(m!=null){h=h.replace(u.match[x],
"");break}}}}m||(m=typeof j.getElementsByTagName!=="undefined"?j.getElementsByTagName("*"):[]);return{set:m,expr:h}};o.filter=function(h,j,s,m){for(var w,t,z=h,x=[],A=j,K=j&&j[0]&&o.isXML(j[0]);h&&j.length;){for(var L in u.filter)if((w=u.leftMatch[L].exec(h))!=null&&w[2]){var f,n,q=u.filter[L];n=w[1];t=false;w.splice(1,1);if(n.substr(n.length-1)!=="\\"){if(A===x)x=[];if(u.preFilter[L])if(w=u.preFilter[L](w,A,s,x,m,K)){if(w===true)continue}else t=f=true;if(w)for(var B=0;(n=A[B])!=null;B++)if(n){f=
q(n,w,B,A);var I=m^!!f;if(s&&f!=null)if(I)t=true;else A[B]=false;else if(I){x.push(n);t=true}}if(f!==undefined){s||(A=x);h=h.replace(u.match[L],"");if(!t)return[];break}}}if(h===z)if(t==null)o.error(h);else break;z=h}return A};o.error=function(h){throw"Syntax error, unrecognized expression: "+h;};var u=o.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(h){return h.getAttribute("href")},type:function(h){return h.getAttribute("type")}},relative:{"+":function(h,j){var s=
typeof j==="string",m=s&&!v.test(j);s=s&&!m;if(m)j=j.toLowerCase();m=0;for(var w=h.length,t;m<w;m++)if(t=h[m]){for(;(t=t.previousSibling)&&t.nodeType!==1;);h[m]=s||t&&t.nodeName.toLowerCase()===j?t||false:t===j}s&&o.filter(j,h,true)},">":function(h,j){var s,m=typeof j==="string",w=0,t=h.length;if(m&&!v.test(j))for(j=j.toLowerCase();w<t;w++){if(s=h[w]){s=s.parentNode;h[w]=s.nodeName.toLowerCase()===j?s:false}}else{for(;w<t;w++)if(s=h[w])h[w]=m?s.parentNode:s.parentNode===j;m&&o.filter(j,h,true)}},
"":function(h,j,s){var m,w=e++,t=b;if(typeof j==="string"&&!v.test(j)){m=j=j.toLowerCase();t=a}t("parentNode",j,w,h,m,s)},"~":function(h,j,s){var m,w=e++,t=b;if(typeof j==="string"&&!v.test(j)){m=j=j.toLowerCase();t=a}t("previousSibling",j,w,h,m,s)}},find:{ID:function(h,j,s){if(typeof j.getElementById!=="undefined"&&!s)return(h=j.getElementById(h[1]))&&h.parentNode?[h]:[]},NAME:function(h,j){if(typeof j.getElementsByName!=="undefined"){var s=[];j=j.getElementsByName(h[1]);for(var m=0,w=j.length;m<
w;m++)j[m].getAttribute("name")===h[1]&&s.push(j[m]);return s.length===0?null:s}},TAG:function(h,j){if(typeof j.getElementsByTagName!=="undefined")return j.getElementsByTagName(h[1])}},preFilter:{CLASS:function(h,j,s,m,w,t){h=" "+h[1].replace(p,"")+" ";if(t)return h;t=0;for(var z;(z=j[t])!=null;t++)if(z)if(w^(z.className&&(" "+z.className+" ").replace(/[\t\n\r]/g," ").indexOf(h)>=0))s||m.push(z);else if(s)j[t]=false;return false},ID:function(h){return h[1].replace(p,"")},TAG:function(h){return h[1].replace(p,
"").toLowerCase()},CHILD:function(h){if(h[1]==="nth"){h[2]||o.error(h[0]);h[2]=h[2].replace(/^\+|\s*/g,"");var j=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(h[2]==="even"&&"2n"||h[2]==="odd"&&"2n+1"||!/\D/.test(h[2])&&"0n+"+h[2]||h[2]);h[2]=j[1]+(j[2]||1)-0;h[3]=j[3]-0}else h[2]&&o.error(h[0]);h[0]=e++;return h},ATTR:function(h,j,s,m,w,t){j=h[1]=h[1].replace(p,"");if(!t&&u.attrMap[j])h[1]=u.attrMap[j];h[4]=(h[4]||h[5]||"").replace(p,"");if(h[2]==="~=")h[4]=" "+h[4]+" ";return h},PSEUDO:function(h,j,s,m,w){if(h[1]===
"not")if((c.exec(h[3])||"").length>1||/^\w/.test(h[3]))h[3]=o(h[3],null,null,j);else{h=o.filter(h[3],j,s,true^w);s||m.push.apply(m,h);return false}else if(u.match.POS.test(h[0])||u.match.CHILD.test(h[0]))return true;return h},POS:function(h){h.unshift(true);return h}},filters:{enabled:function(h){return h.disabled===false&&h.type!=="hidden"},disabled:function(h){return h.disabled===true},checked:function(h){return h.checked===true},selected:function(h){return h.selected===true},parent:function(h){return!!h.firstChild},
empty:function(h){return!h.firstChild},has:function(h,j,s){return!!o(s[3],h).length},header:function(h){return/h\d/i.test(h.nodeName)},text:function(h){var j=h.getAttribute("type"),s=h.type;return h.nodeName.toLowerCase()==="input"&&"text"===s&&(j===s||j===null)},radio:function(h){return h.nodeName.toLowerCase()==="input"&&"radio"===h.type},checkbox:function(h){return h.nodeName.toLowerCase()==="input"&&"checkbox"===h.type},file:function(h){return h.nodeName.toLowerCase()==="input"&&"file"===h.type},
password:function(h){return h.nodeName.toLowerCase()==="input"&&"password"===h.type},submit:function(h){var j=h.nodeName.toLowerCase();return(j==="input"||j==="button")&&"submit"===h.type},image:function(h){return h.nodeName.toLowerCase()==="input"&&"image"===h.type},reset:function(h){var j=h.nodeName.toLowerCase();return(j==="input"||j==="button")&&"reset"===h.type},button:function(h){var j=h.nodeName.toLowerCase();return j==="input"&&"button"===h.type||j==="button"},input:function(h){return/input|select|textarea|button/i.test(h.nodeName)},
focus:function(h){return h===h.ownerDocument.activeElement}},setFilters:{first:function(h,j){return j===0},last:function(h,j,s,m){return j===m.length-1},even:function(h,j){return j%2===0},odd:function(h,j){return j%2===1},lt:function(h,j,s){return j<s[3]-0},gt:function(h,j,s){return j>s[3]-0},nth:function(h,j,s){return s[3]-0===j},eq:function(h,j,s){return s[3]-0===j}},filter:{PSEUDO:function(h,j,s,m){var w=j[1],t=u.filters[w];if(t)return t(h,s,j,m);else if(w==="contains")return(h.textContent||h.innerText||
o.getText([h])||"").indexOf(j[3])>=0;else if(w==="not"){j=j[3];s=0;for(m=j.length;s<m;s++)if(j[s]===h)return false;return true}else o.error(w)},CHILD:function(h,j){var s=j[1],m=h;switch(s){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(s==="first")return true;m=h;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":s=j[2];var w=j[3];if(s===1&&w===0)return true;j=j[0];var t=h.parentNode;if(t&&(t.sizcache!==j||!h.nodeIndex)){var z=
0;for(m=t.firstChild;m;m=m.nextSibling)if(m.nodeType===1)m.nodeIndex=++z;t.sizcache=j}h=h.nodeIndex-w;return s===0?h===0:h%s===0&&h/s>=0}},ID:function(h,j){return h.nodeType===1&&h.getAttribute("id")===j},TAG:function(h,j){return j==="*"&&h.nodeType===1||h.nodeName.toLowerCase()===j},CLASS:function(h,j){return(" "+(h.className||h.getAttribute("class"))+" ").indexOf(j)>-1},ATTR:function(h,j){var s=j[1];h=u.attrHandle[s]?u.attrHandle[s](h):h[s]!=null?h[s]:h.getAttribute(s);s=h+"";var m=j[2];j=j[4];
return h==null?m==="!=":m==="="?s===j:m==="*="?s.indexOf(j)>=0:m==="~="?(" "+s+" ").indexOf(j)>=0:!j?s&&h!==false:m==="!="?s!==j:m==="^="?s.indexOf(j)===0:m==="$="?s.substr(s.length-j.length)===j:m==="|="?s===j||s.substr(0,j.length+1)===j+"-":false},POS:function(h,j,s,m){var w=u.setFilters[j[2]];if(w)return w(h,s,j,m)}}},D=u.match.POS,E=function(h,j){return"\\"+(j-0+1)};for(var J in u.match){u.match[J]=new RegExp(u.match[J].source+/(?![^\[]*\])(?![^\(]*\))/.source);u.leftMatch[J]=new RegExp(/(^(?:.|\r|\n)*?)/.source+
u.match[J].source.replace(/\\(\d+)/g,E))}var O=function(h,j){h=Array.prototype.slice.call(h,0);if(j){j.push.apply(j,h);return j}return h};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(M){O=function(h,j){var s=0;j=j||[];if(g.call(h)==="[object Array]")Array.prototype.push.apply(j,h);else if(typeof h.length==="number")for(var m=h.length;s<m;s++)j.push(h[s]);else for(;h[s];s++)j.push(h[s]);return j}}var N,T;if(document.documentElement.compareDocumentPosition)N=function(h,
j){if(h===j){k=true;return 0}if(!h.compareDocumentPosition||!j.compareDocumentPosition)return h.compareDocumentPosition?-1:1;return h.compareDocumentPosition(j)&4?-1:1};else{N=function(h,j){if(h===j){k=true;return 0}else if(h.sourceIndex&&j.sourceIndex)return h.sourceIndex-j.sourceIndex;var s,m,w=[],t=[];s=h.parentNode;m=j.parentNode;var z=s;if(s===m)return T(h,j);else if(s){if(!m)return 1}else return-1;for(;z;){w.unshift(z);z=z.parentNode}for(z=m;z;){t.unshift(z);z=z.parentNode}s=w.length;m=t.length;
for(z=0;z<s&&z<m;z++)if(w[z]!==t[z])return T(w[z],t[z]);return z===s?T(h,t[z],-1):T(w[z],j,1)};T=function(h,j,s){if(h===j)return s;for(h=h.nextSibling;h;){if(h===j)return-1;h=h.nextSibling}return 1}}o.getText=function(h){for(var j="",s,m=0;h[m];m++){s=h[m];if(s.nodeType===3||s.nodeType===4)j+=s.nodeValue;else if(s.nodeType!==8)j+=o.getText(s.childNodes)}return j};(function(){var h=document.createElement("div"),j="script"+(new Date).getTime(),s=document.documentElement;h.innerHTML="<a name='"+j+"'/>";
s.insertBefore(h,s.firstChild);if(document.getElementById(j)){u.find.ID=function(m,w,t){if(typeof w.getElementById!=="undefined"&&!t)return(w=w.getElementById(m[1]))?w.id===m[1]||typeof w.getAttributeNode!=="undefined"&&w.getAttributeNode("id").nodeValue===m[1]?[w]:undefined:[]};u.filter.ID=function(m,w){var t=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&t&&t.nodeValue===w}}s.removeChild(h);s=h=null})();(function(){var h=document.createElement("div");h.appendChild(document.createComment(""));
if(h.getElementsByTagName("*").length>0)u.find.TAG=function(j,s){s=s.getElementsByTagName(j[1]);if(j[1]==="*"){j=[];for(var m=0;s[m];m++)s[m].nodeType===1&&j.push(s[m]);s=j}return s};h.innerHTML="<a href='#'></a>";if(h.firstChild&&typeof h.firstChild.getAttribute!=="undefined"&&h.firstChild.getAttribute("href")!=="#")u.attrHandle.href=function(j){return j.getAttribute("href",2)};h=null})();document.querySelectorAll&&function(){var h=o,j=document.createElement("div");j.innerHTML="<p class='TEST'></p>";
if(!(j.querySelectorAll&&j.querySelectorAll(".TEST").length===0)){o=function(m,w,t,z){w=w||document;if(!z&&!o.isXML(w)){var x=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(m);if(x&&(w.nodeType===1||w.nodeType===9))if(x[1])return O(w.getElementsByTagName(m),t);else if(x[2]&&u.find.CLASS&&w.getElementsByClassName)return O(w.getElementsByClassName(x[2]),t);if(w.nodeType===9){if(m==="body"&&w.body)return O([w.body],t);else if(x&&x[3]){var A=w.getElementById(x[3]);if(A&&A.parentNode){if(A.id===x[3])return O([A],
t)}else return O([],t)}try{return O(w.querySelectorAll(m),t)}catch(K){}}else if(w.nodeType===1&&w.nodeName.toLowerCase()!=="object"){x=w;var L=(A=w.getAttribute("id"))||"__sizzle__",f=w.parentNode,n=/^\s*[+~]/.test(m);if(A)L=L.replace(/'/g,"\\$&");else w.setAttribute("id",L);if(n&&f)w=w.parentNode;try{if(!n||f)return O(w.querySelectorAll("[id='"+L+"'] "+m),t)}catch(q){}finally{A||x.removeAttribute("id")}}}return h(m,w,t,z)};for(var s in h)o[s]=h[s];j=null}}();(function(){var h=document.documentElement,
j=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.msMatchesSelector;if(j){var s=!j.call(document.createElement("div"),"div"),m=false;try{j.call(document.documentElement,"[test!='']:sizzle")}catch(w){m=true}o.matchesSelector=function(t,z){z=z.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!o.isXML(t))try{if(m||!u.match.PSEUDO.test(z)&&!/!=/.test(z)){var x=j.call(t,z);if(x||!s||t.document&&t.document.nodeType!==11)return x}}catch(A){}return o(z,null,null,[t]).length>0}}})();(function(){var h=
document.createElement("div");h.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!h.getElementsByClassName||h.getElementsByClassName("e").length===0)){h.lastChild.className="e";if(h.getElementsByClassName("e").length!==1){u.order.splice(1,0,"CLASS");u.find.CLASS=function(j,s,m){if(typeof s.getElementsByClassName!=="undefined"&&!m)return s.getElementsByClassName(j[1])};h=null}}})();o.contains=document.documentElement.contains?function(h,j){return h!==j&&(h.contains?h.contains(j):
true)}:document.documentElement.compareDocumentPosition?function(h,j){return!!(h.compareDocumentPosition(j)&16)}:function(){return false};o.isXML=function(h){return(h=(h?h.ownerDocument||h:0).documentElement)?h.nodeName!=="HTML":false};var U=function(h,j){var s,m=[],w="";for(j=j.nodeType?[j]:j;s=u.match.PSEUDO.exec(h);){w+=s[0];h=h.replace(u.match.PSEUDO,"")}h=u.relative[h]?h+"*":h;s=0;for(var t=j.length;s<t;s++)o(h,j[s],m);return o.filter(w,m)};window.Sizzle=o})();Prototype._original_property=window.Sizzle;
(function(a){function b(g,k){return e(a(g,k||document))}function c(g,k){return a.matches(k,[g]).length==1}var e=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=b;Prototype.Selector.match=c})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){if(typeof b!="object")b={hash:!!b};else if(Object.isUndefined(b.hash))b.hash=true;var c,e,g=false,k=b.submit,l;if(b.hash){b={};l=function(p,v,o){if(v in p){Object.isArray(p[v])||(p[v]=[p[v]]);p[v]=p[v].concat(o)}else p[v]=o;return p}}else{b="";l=function(p,v,o){Object.isArray(o)||(o=[o]);if(!o.length)return p;var u=encodeURIComponent(v);return p+(p?"&":"")+o.map(function(D){D=D.gsub(/(\r)?\n/,"\r\n");D=encodeURIComponent(D);
D=D.gsub(/%20/,"+");return u+"="+D}).join("&")}}return a.inject(b,function(p,v){if(!v.disabled&&v.name){c=v.name;e=$(v).getValue();if(e!=null&&v.type!="file"&&(v.type!="submit"||!g&&k!==false&&(!k||c==k)&&(g=true)))p=l(p,c,e)}return p})}};
Form.Methods={serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,c=[],e=Form.Element.Serializers,g=0;b=a[g];g++)e[b.tagName.toLowerCase()]&&c.push(Element.extend(b));return c},getInputs:function(a,b,c){a=$(a);a=a.getElementsByTagName("input");if(!b&&!c)return $A(a).map(Element.extend);for(var e=0,g=[],k=a.length;e<k;e++){var l=a[e];b&&l.type!=b||c&&l.name!=c||g.push(Element.extend(l))}return g},disable:function(a){a=
$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(c){return"hidden"!=c.type&&!c.disabled});var b=a.findAll(function(c){return c.hasAttribute("tabIndex")&&c.tabIndex>=0}).sortBy(function(c){return c.tabIndex}).first();return b?b:a.find(function(c){return/^(?:input|select|textarea)$/i.test(c.tagName)})},focusFirstElement:function(a){a=$(a);var b=a.findFirstElement();
b&&b.activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var c=b.parameters,e=a.readAttribute("action")||"";if(e.blank())e=window.location.href;b.parameters=a.serialize(true);if(c){if(Object.isString(c))c=c.toQueryParams();Object.extend(b.parameters,c)}if(a.hasAttribute("method")&&!b.method)b.method=a.method;return new Ajax.Request(e,b)}};Form.Element={focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(b!=undefined){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return $(a).value!=""},activate:function(a){a=$(a);try{a.focus();
if(a.select&&(a.tagName.toLowerCase()!="input"||!/^(?:button|reset|submit)$/i.test(a.type)))a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=true;return a},enable:function(a){a=$(a);a.disabled=false;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers=function(){function a(p,v){switch(p.type.toLowerCase()){case "checkbox":case "radio":return b(p,v);default:return c(p,v)}}function b(p,v){if(Object.isUndefined(v))return p.checked?p.value:null;else p.checked=!!v}function c(p,v){if(Object.isUndefined(v))return p.value;else p.value=v}function e(p,v){if(Object.isUndefined(v))return(p.type==="select-one"?g:k)(p);for(var o,u,D=!Object.isArray(v),E=0,J=p.length;E<J;E++){o=p.options[E];u=this.optionValue(o);if(D){if(u==v){o.selected=
true;return}}else o.selected=v.include(u)}}function g(p){var v=p.selectedIndex;return v>=0?l(p.options[v]):null}function k(p){var v,o=p.length;if(!o)return null;var u=0;for(v=[];u<o;u++){var D=p.options[u];D.selected&&v.push(l(D))}return v}function l(p){return Element.hasAttribute(p,"value")?p.value:p.text}return{input:a,inputSelector:b,textarea:c,select:e,selectOne:g,selectMany:k,optionValue:l,button:c}}();
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,c,e){$super(e,c);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a)){this.callback(this.element,a);this.lastValue=a}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();this.element.tagName.toLowerCase()=="form"?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();if(this.lastValue!=a){this.callback(this.element,a);this.lastValue=a}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this));break}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(a){function b(r,C){return r.which?r.which===C+1:r.button===C}function c(r,C){return r.button===ha[C]}function e(r,C){switch(C){case 0:return r.which==1&&!r.metaKey;case 1:return r.which==2||r.which==1&&r.metaKey;case 2:return r.which==3;default:return false}}function g(r){return ba(r,0)}function k(r){return ba(r,1)}function l(r){return ba(r,2)}function p(r){return Element.extend(v(r))}function v(r){r=R.extend(r);var C=r.target,H=r.type;if((r=r.currentTarget)&&r.tagName)if(H==="load"||H===
"error"||H==="click"&&r.tagName.toLowerCase()==="input"&&r.type==="radio")C=r;if(C.nodeType==Node.TEXT_NODE)C=C.parentNode;return Element.extend(C)}function o(r,C){r=v(r);var H=Prototype.Selector.match;if(!C)return Element.extend(r);for(;r;){if(Object.isElement(r)&&H(r,C))return Element.extend(r);r=r.parentNode}}function u(r){return{x:D(r),y:E(r)}}function D(r){var C=document.documentElement,H=document.body||{scrollLeft:0};return r.pageX||r.clientX+(C.scrollLeft||H.scrollLeft)-(C.clientLeft||0)}function E(r){var C=
document.documentElement,H=document.body||{scrollTop:0};return r.pageY||r.clientY+(C.scrollTop||H.scrollTop)-(C.clientTop||0)}function J(r){R.extend(r);r.preventDefault();r.stopPropagation();r.stopped=true}function O(r){return va[r]||r}function M(r){if(r===window)return 0;if(typeof r._prototypeUID==="undefined")r._prototypeUID=Element.Storage.UID++;return r._prototypeUID}function N(r){if(r===window)return 0;if(r==document)return 1;return r.uniqueID}function T(r){return r.include(":")}function U(r,
C){var H=a.Event.cache;if(Object.isUndefined(C))C=M(r);H[C]||(H[C]={element:r});return H[C]}function h(r,C){if(Object.isUndefined(C))C=M(r);delete a.Event.cache[C]}function j(r,C,H){var S=U(r);S[C]||(S[C]=[]);S=S[C];for(var X=S.length;X--;)if(S[X].handler===H)return null;r=M(r);C={responder:a.Event._createResponder(r,C,H),handler:H};S.push(C);return C}function s(r,C,H){if(r=U(r)[C]){C=r.length;for(var S;C--;)if(r[C].handler===H){S=r[C];break}if(S){H=r.indexOf(S);r.splice(H,1);return S}}}function m(r,
C,H){r=$(r);H=j(r,C,H);if(H===null)return r;H=H.responder;T(C)?t(r,C,H):w(r,C,H);return r}function w(r,C,H){C=O(C);r.addEventListener?r.addEventListener(C,H,false):r.attachEvent("on"+C,H)}function t(r,C,H){if(r.addEventListener)r.addEventListener("dataavailable",H,false);else{r.attachEvent("ondataavailable",H);r.attachEvent("onlosecapture",H)}}function z(r,C,H){r=$(r);var S=!Object.isUndefined(H);if(Object.isUndefined(C)&&!S){K(r);return r}if(!S){L(r,C);return r}H=s(r,C,H);if(!H)return r;f(r,C,H.responder);
return r}function x(r,C,H){C=O(C);r.removeEventListener?r.removeEventListener(C,H,false):r.detachEvent("on"+C,H)}function A(r,C,H){if(r.removeEventListener)r.removeEventListener("dataavailable",H,false);else{r.detachEvent("ondataavailable",H);r.detachEvent("onlosecapture",H)}}function K(r){var C=M(r),H=U(r,C);h(r,C);var S;for(var X in H)if(X!=="element"){C=H[X];for(S=C.length;S--;)f(r,X,C[S].responder)}}function L(r,C){var H=U(r),S=H[C];if(S){delete H[C];for(H=S.length;H--;)f(r,C,S[H].responder)}}
function f(r,C,H){T(C)?A(r,C,H):x(r,C,H)}function n(r){if(r!==document)return r;if(document.createEvent&&!r.dispatchEvent)return document.documentElement;return r}function q(r,C,H,S){r=n($(r));if(Object.isUndefined(S))S=true;H=H||{};r=wa(r,C,H,S);return R.extend(r)}function B(r,C,H,S){var X=document.createEvent("HTMLEvents");X.initEvent("dataavailable",S,true);X.eventName=C;X.memo=H;r.dispatchEvent(X);return X}function I(r,C,H,S){var X=document.createEventObject();X.eventType=S?"ondataavailable":
"onlosecapture";X.eventName=C;X.memo=H;r.fireEvent(X.eventType,X);return X}function Q(r,C,H,S){r=$(r);if(Object.isFunction(H)&&Object.isUndefined(S)){S=H;H=null}return(new R.Handler(r,C,H,S)).start()}function F(){a.Event.cache=null}var P=document.createElement("div"),W=document.documentElement;W="onmouseenter"in W&&"onmouseleave"in W;var R={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,
KEY_INSERT:45},fa=function(){return false};if(window.attachEvent)fa=window.addEventListener?function(r){return!(r instanceof window.Event)}:function(){return true};var ba,ha={0:1,1:4,2:2};ba=window.attachEvent?window.addEventListener?function(r,C){return fa(r)?c(r,C):b(r,C)}:c:Prototype.Browser.WebKit?e:b;R.Methods={isLeftClick:g,isMiddleClick:k,isRightClick:l,element:p,findElement:o,pointer:u,pointerX:D,pointerY:E,stop:J};var ja=Object.keys(R.Methods).inject({},function(r,C){r[C]=R.Methods[C].methodize();
return r});if(window.attachEvent){function ua(r){switch(r.type){case "mouseover":case "mouseenter":r=r.fromElement;break;case "mouseout":case "mouseleave":r=r.toElement;break;default:return null}return Element.extend(r)}var na={stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}};R.extend=function(r,C){if(!r)return false;if(!fa(r))return r;if(r._extendedByPrototype)return r;r._extendedByPrototype=Prototype.emptyFunction;
var H=R.pointer(r);Object.extend(r,{target:r.srcElement||C,relatedTarget:ua(r),pageX:H.x,pageY:H.y});Object.extend(r,ja);Object.extend(r,na);return r}}else R.extend=Prototype.K;if(window.addEventListener){R.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(R.prototype,ja)}var va={mouseenter:"mouseover",mouseleave:"mouseout"};if(W)O=Prototype.K;if("uniqueID"in P)M=N;R._isCustomEvent=T;var wa=document.createEvent?B:I;R.Handler=Class.create({initialize:function(r,
C,H,S){this.element=$(r);this.eventName=C;this.selector=H;this.callback=S;this.handler=this.handleEvent.bind(this)},start:function(){R.observe(this.element,this.eventName,this.handler);return this},stop:function(){R.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(r){var C=R.findElement(r,this.selector);C&&this.callback.call(this.element,r,C)}});Object.extend(R,R.Methods);Object.extend(R,{fire:q,observe:m,stopObserving:z,on:Q});Element.addMethods({fire:q,observe:m,
stopObserving:z,on:Q});Object.extend(document,{fire:q.methodize(),observe:m.methodize(),stopObserving:z.methodize(),on:Q.methodize(),loaded:false});if(a.Event)Object.extend(window.Event,R);else a.Event=R;a.Event.cache={};window.attachEvent&&window.attachEvent("onunload",F);W=P=null})(this);
(function(a){function b(p){return!l&&(p==="mouseenter"||p==="mouseleave")}function c(p,v,o){if(Event._isCustomEvent(v))return e(p,v,o);if(b(v))return g(p,v,o);return function(u){var D=Event.cache[p].element;Event.extend(u,D);o.call(D,u)}}function e(p,v,o){return function(u){var D=Event.cache[p].element;if(Object.isUndefined(u.eventName))return false;if(u.eventName!==v)return false;Event.extend(u,D);o.call(D,u)}}function g(p,v,o){return function(u){var D=Event.cache[p].element;Event.extend(u,D);for(var E=
u.relatedTarget;E&&E!==D;)try{E=E.parentNode}catch(J){E=D}E!==D&&o.call(D,u)}}var k=document.documentElement,l="onmouseenter"in k&&"onmouseleave"in k;a.Event._createResponder=c;k=null})(this);
(function(){function a(){if(!document.loaded){e&&window.clearTimeout(e);document.loaded=true;document.fire("dom:loaded")}}function b(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",b);a()}}function c(){try{document.documentElement.doScroll("left")}catch(g){e=c.defer();return}a()}var e;if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,false);else{document.attachEvent("onreadystatechange",b);if(window==top)e=c.defer()}Event.observe(window,"load",
a)})(this);Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=new Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||
document.documentElement.scrollTop||document.body.scrollTop||0},within:function(a,b,c){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,c);this.xcomp=b;this.ycomp=c;this.offset=Element.cumulativeOffset(a);return c>=this.offset[1]&&c<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,c){var e=Element.cumulativeScrollOffset(a);this.xcomp=b+e[0]-this.deltaX;this.ycomp=c+e[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);
return this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if(a=="vertical")return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if(a=="horizontal")return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},
relativize:function(a){Position.prepare();return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,c){c=c||{};return Element.clonePosition(b,a,c)}};
if(!document.getElementsByClassName)document.getElementsByClassName=function(a){function b(c){return c.blank()?null:"[contains(concat(' ', @class, ' '), ' "+c+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(c,e){e=e.toString().strip();return(e=/\s/.test(e)?$w(e).map(b).join(""):b(e))?document._getElementsByXPath(".//*"+e,c):[]}:function(c,e){e=e.toString().strip();var g=[],k=/\s/.test(e)?$w(e):null;if(!k&&!e)return g;c=$(c).getElementsByTagName("*");e=" "+e+" ";for(var l=
0,p,v;p=c[l];l++)if(p.className&&(v=" "+p.className+" ")&&(v.include(e)||k&&k.all(function(o){return!o.toString().blank()&&v.include(" "+o+" ")})))g.push(Element.extend(p));return g};return function(c,e){return $(e||document.body).getElementsByClassName(c)}}(Element.Methods);Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a,b){this.element.className.split(/\s+/).select(function(c){return c.length>0})._each(a,b)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(a,b){for(var c=Prototype.Selector.match,e=[],g=0,k=a.length;g<k;g++){var l=a[g];c(l,b)&&e.push(Element.extend(l))}return e},
findElement:function(a,b,c){c=c||0;for(var e=0,g,k=0,l=a.length;k<l;k++){g=a[k];if(Prototype.Selector.match(g,b)&&c===e++)return Element.extend(g)}},findChildElements:function(a,b){b=b.toArray().join(", ");return Prototype.Selector.select(b,a||document)}})})();String.prototype.parseColor=function(a){var b="#";if(this.slice(0,4)=="rgb("){var c=this.slice(4,this.length-1).split(","),e=0;do b+=parseInt(c[e]).toColorPart();while(++e<3)}else if(this.slice(0,1)=="#"){if(this.length==4)for(e=1;e<4;e++)b+=(this.charAt(e)+this.charAt(e)).toLowerCase();if(this.length==7)b=this.toLowerCase()}return b.length==7?b:a||this};
Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(b){return b.nodeType==3?b.nodeValue:b.hasChildNodes()?Element.collectTextNodes(b):""}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(c){return c.nodeType==3?c.nodeValue:c.hasChildNodes()&&!Element.hasClassName(c,b)?Element.collectTextNodesIgnoreClass(c,b):""}).flatten().join("")};
Element.setContentZoom=function(a,b){a=$(a);a.setStyle({fontSize:b/100+"em"});Prototype.Browser.WebKit&&window.scrollBy(0,0);return a};Element.getInlineOpacity=function(a){return $(a).style.opacity||""};Element.forceRerendering=function(a){try{a=$(a);var b=document.createTextNode(" ");a.appendChild(b);a.removeChild(b)}catch(c){}};
var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return-Math.cos(a*Math.PI)/2+0.5},reverse:function(a){return 1-a},flicker:function(a){a=-Math.cos(a*Math.PI)/4+0.75+Math.random()/4;return a>1?1:a},wobble:function(a){return-Math.cos(a*Math.PI*9*a)/2+0.5},pulse:function(a,b){return-Math.cos(a*((b||5)-0.5)*2*Math.PI)/2+0.5},spring:function(a){return 1-
Math.cos(a*4.5*Math.PI)*Math.exp(-a*6)},none:function(){return 0},full:function(){return 1}},DefaultOptions:{duration:1,fps:100,sync:false,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";if(Prototype.Browser.IE)b+=";zoom:1";a=$(a);$A(a.childNodes).each(function(c){if(c.nodeType==3){c.nodeValue.toArray().each(function(e){a.insertBefore((new Element("span",{style:b})).update(e==" "?String.fromCharCode(160):e),c)});Element.remove(c)}})},multiple:function(a,b,c){a=
(typeof a=="object"||Object.isFunction(a))&&a.length?a:$(a).childNodes;var e=Object.extend({speed:0.1,delay:0},c||{}),g=e.delay;$A(a).each(function(k,l){new b(k,Object.extend(e,{delay:l*e.speed+g}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(a,b,c){a=$(a);b=(b||"appear").toLowerCase();return Effect[Effect.PAIRS[b][a.visible()?1:0]](a,Object.extend({queue:{position:"end",scope:a.id||"global",limit:1}},c||{}))}};
Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;
Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(a){this.effects._each(a)},add:function(a){var b=(new Date).getTime();switch(Object.isString(a.options.queue)?a.options.queue:a.options.queue.position){case "front":this.effects.findAll(function(c){return c.state=="idle"}).each(function(c){c.startOn+=a.finishOn;c.finishOn+=a.finishOn});break;case "with-last":b=this.effects.pluck("startOn").max()||b;break;case "end":b=this.effects.pluck("finishOn").max()||
b;break}a.startOn+=b;a.finishOn+=b;if(!a.options.queue.limit||this.effects.length<a.options.queue.limit)this.effects.push(a);if(!this.interval)this.interval=setInterval(this.loop.bind(this),15)},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){for(var a=(new Date).getTime(),b=0,c=this.effects.length;b<c;b++)this.effects[b]&&this.effects[b].loop(a)}});
Effect.Queues={instances:$H(),get:function(a){if(!Object.isString(a))return a;return this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue)}};Effect.Queue=Effect.Queues.get("global");
Effect.Base=Class.create({position:null,start:function(a){if(a&&a.transition===false)a.transition=Effect.Transitions.linear;this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1E3;this.finishOn=this.startOn+this.options.duration*1E3;this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=function(){function b(c,
e){c.options[e+"Internal"]&&c.options[e+"Internal"](c);c.options[e]&&c.options[e](c)}return function(c){if(this.state==="idle"){this.state="running";b(this,"beforeSetup");this.setup&&this.setup();b(this,"afterSetup")}if(this.state==="running"){this.position=c=this.options.transition(c)*this.fromToDelta+this.options.from;b(this,"beforeUpdate");this.update&&this.update(c);b(this,"afterUpdate")}}}();this.event("beforeStart");this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":
this.options.queue.scope).add(this)},loop:function(a){if(a>=this.startOn)if(a>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");this.finish&&this.finish();this.event("afterFinish")}else{a=(a-this.startOn)/this.totalTime;var b=(a*this.totalFrames).round();if(b>this.currentFrame){this.render(a);this.currentFrame=b}}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this);this.state="finished"},
event:function(a){this.options[a+"Internal"]&&this.options[a+"Internal"](this);this.options[a]&&this.options[a](this)},inspect:function(){var a=$H();for(property in this)Object.isFunction(this[property])||a.set(property,this[property]);return"#<Effect:"+a.inspect()+",options:"+$H(this.options).inspect()+">"}});
Effect.Parallel=Class.create(Effect.Base,{initialize:function(a,b){this.effects=a||[];this.start(b)},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");b.finish&&b.finish(a);b.event("afterFinish")})}});
Effect.Tween=Class.create(Effect.Base,{initialize:function(a,b,c){a=Object.isString(a)?$(a):a;var e=$A(arguments),g=e.last();e=e.length==5?e[3]:null;this.method=Object.isFunction(g)?g.bind(a):Object.isFunction(a[g])?a[g].bind(a):function(k){a[g]=k};this.start(Object.extend({from:b,to:c},e||{}))},update:function(a){this.method(a)}});Effect.Event=Class.create(Effect.Base,{initialize:function(a){this.start(Object.extend({duration:0},a||{}))},update:Prototype.emptyFunction});
Effect.Opacity=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});this.start(Object.extend({from:this.element.getOpacity()||0,to:1},b||{}))},update:function(a){this.element.setOpacity(a)}});
Effect.Move=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({x:0,y:0,mode:"relative"},b||{}))},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x-=this.originalLeft;this.options.y-=this.originalTop}},update:function(a){this.element.setStyle({left:(this.options.x*
a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}});Effect.MoveBy=function(a,b,c,e){return new Effect.Move(a,Object.extend({x:c,y:b},e||{}))};
Effect.Scale=Class.create(Effect.Base,{initialize:function(a,b,c){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:b},c||{}))},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(b){this.originalStyle[b]=
this.element.style[b]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){if(a.indexOf(b)>0){this.fontSize=parseFloat(a);this.fontSizeType=b}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box")this.dims=[this.element.offsetHeight,this.element.offsetWidth];if(/^content/.test(this.options.scaleMode))this.dims=
[this.element.scrollHeight,this.element.scrollWidth];if(!this.dims)this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]},update:function(a){a=this.options.scaleFrom/100+this.factor*a;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*a+this.fontSizeType});this.setDimensions(this.dims[0]*a,this.dims[1]*a)},finish:function(){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(a,b){var c={};
if(this.options.scaleX)c.width=b.round()+"px";if(this.options.scaleY)c.height=a.round()+"px";if(this.options.scaleFromCenter){a=(a-this.dims[0])/2;b=(b-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY)c.top=this.originalTop-a+"px";if(this.options.scaleX)c.left=this.originalLeft-b+"px"}else{if(this.options.scaleY)c.top=-a+"px";if(this.options.scaleX)c.left=-b+"px"}}this.element.setStyle(c)}});
Effect.Highlight=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;this.start(Object.extend({startcolor:"#ffff99"},b||{}))},setup:function(){if(this.element.getStyle("display")=="none")this.cancel();else{this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle("background-image");this.element.setStyle({backgroundImage:"none"})}if(!this.options.endcolor)this.options.endcolor=
this.element.getStyle("background-color").parseColor("#ffffff");if(!this.options.restorecolor)this.options.restorecolor=this.element.getStyle("background-color");this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(a*2+1,a*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(a*2+1,a*2+3),16)-this._base[a]}.bind(this))}},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,c,e){return b+
(this._base[e]+this._delta[e]*a).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(a,b){b=b||{};var c=document.viewport.getScrollOffsets();a=$(a).cumulativeOffset();if(b.offset)a[1]+=b.offset;return new Effect.Tween(null,c.top,a[1],b,function(e){scrollTo(c.left,e.round())})};
Effect.Fade=function(a,b){a=$(a);var c=a.getInlineOpacity();b=Object.extend({from:a.getOpacity()||1,to:0,afterFinishInternal:function(e){e.options.to==0&&e.element.hide().setStyle({opacity:c})}},b||{});return new Effect.Opacity(a,b)};
Effect.Appear=function(a,b){a=$(a);b=Object.extend({from:a.getStyle("display")=="none"?0:a.getOpacity()||0,to:1,afterFinishInternal:function(c){c.element.forceRerendering()},beforeSetup:function(c){c.element.setOpacity(c.options.from).show()}},b||{});return new Effect.Opacity(a,b)};
Effect.Puff=function(a,b){a=$(a);var c={opacity:a.getInlineOpacity(),position:a.getStyle("position"),top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};return new Effect.Parallel([new Effect.Scale(a,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(a,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(e){Position.absolutize(e.effects[0].element)},afterFinishInternal:function(e){e.effects[0].element.hide().setStyle(c)}},
b||{}))};Effect.BlindUp=function(a,b){a=$(a);a.makeClipping();return new Effect.Scale(a,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(c){c.element.hide().undoClipping()}},b||{}))};
Effect.BlindDown=function(a,b){a=$(a);var c=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:c.height,originalWidth:c.width},restoreAfterFinish:true,afterSetup:function(e){e.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.element.undoClipping()}},b||{}))};
Effect.SwitchOff=function(a,b){a=$(a);var c=a.getInlineOpacity();return new Effect.Appear(a,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(e){new Effect.Scale(e.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(g){g.element.makePositioned().makeClipping()},afterFinishInternal:function(g){g.element.hide().undoClipping().undoPositioned().setStyle({opacity:c})}})}},b||{}))};
Effect.DropOut=function(a,b){a=$(a);var c={top:a.getStyle("top"),left:a.getStyle("left"),opacity:a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(a,{x:0,y:100,sync:true}),new Effect.Opacity(a,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(e){e.effects[0].element.makePositioned()},afterFinishInternal:function(e){e.effects[0].element.hide().undoPositioned().setStyle(c)}},b||{}))};
Effect.Shake=function(a,b){a=$(a);b=Object.extend({distance:20,duration:0.5},b||{});var c=parseFloat(b.distance),e=parseFloat(b.duration)/10,g={top:a.getStyle("top"),left:a.getStyle("left")};return new Effect.Move(a,{x:c,y:0,duration:e,afterFinishInternal:function(k){new Effect.Move(k.element,{x:-c*2,y:0,duration:e*2,afterFinishInternal:function(l){new Effect.Move(l.element,{x:c*2,y:0,duration:e*2,afterFinishInternal:function(p){new Effect.Move(p.element,{x:-c*2,y:0,duration:e*2,afterFinishInternal:function(v){new Effect.Move(v.element,
{x:c*2,y:0,duration:e*2,afterFinishInternal:function(o){new Effect.Move(o.element,{x:-c,y:0,duration:e,afterFinishInternal:function(u){u.element.undoPositioned().setStyle(g)}})}})}})}})}})}})};
Effect.SlideDown=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),e=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:e.height,originalWidth:e.width},restoreAfterFinish:true,afterSetup:function(g){g.element.makePositioned();g.element.down().makePositioned();window.opera&&g.element.setStyle({top:""});g.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(g){g.element.down().setStyle({bottom:g.dims[0]-
g.element.clientHeight+"px"})},afterFinishInternal:function(g){g.element.undoClipping().undoPositioned();g.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};
Effect.SlideUp=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),e=a.getDimensions();return new Effect.Scale(a,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:e.height,originalWidth:e.width},restoreAfterFinish:true,afterSetup:function(g){g.element.makePositioned();g.element.down().makePositioned();window.opera&&g.element.setStyle({top:""});g.element.makeClipping().show()},afterUpdateInternal:function(g){g.element.down().setStyle({bottom:g.dims[0]-
g.element.clientHeight+"px"})},afterFinishInternal:function(g){g.element.hide().undoClipping().undoPositioned();g.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(b){b.element.makeClipping()},afterFinishInternal:function(b){b.element.hide().undoClipping()}})};
Effect.Grow=function(a,b){a=$(a);var c=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},b||{}),e={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},g=a.getDimensions(),k,l,p,v;switch(c.direction){case "top-left":k=l=p=v=0;break;case "top-right":k=g.width;l=v=0;p=-g.width;break;case "bottom-left":k=p=0;l=g.height;v=-g.height;break;
case "bottom-right":k=g.width;l=g.height;p=-g.width;v=-g.height;break;case "center":k=g.width/2;l=g.height/2;p=-g.width/2;v=-g.height/2;break}return new Effect.Move(a,{x:k,y:l,duration:0.01,beforeSetup:function(o){o.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(o){new Effect.Parallel([new Effect.Opacity(o.element,{sync:true,to:1,from:0,transition:c.opacityTransition}),new Effect.Move(o.element,{x:p,y:v,sync:true,transition:c.moveTransition}),new Effect.Scale(o.element,
100,{scaleMode:{originalHeight:g.height,originalWidth:g.width},sync:true,scaleFrom:window.opera?1:0,transition:c.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(u){u.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(u){u.effects[0].element.undoClipping().undoPositioned().setStyle(e)}},c))}})};
Effect.Shrink=function(a,b){a=$(a);b=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},b||{});var c={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},e=a.getDimensions(),g,k;switch(b.direction){case "top-left":g=k=0;break;case "top-right":g=e.width;k=0;break;case "bottom-left":g=0;k=e.height;break;case "bottom-right":g=e.width;k=
e.height;break;case "center":g=e.width/2;k=e.height/2;break}return new Effect.Parallel([new Effect.Opacity(a,{sync:true,to:0,from:1,transition:b.opacityTransition}),new Effect.Scale(a,window.opera?1:0,{sync:true,transition:b.scaleTransition,restoreAfterFinish:true}),new Effect.Move(a,{x:g,y:k,sync:true,transition:b.moveTransition})],Object.extend({beforeStartInternal:function(l){l.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(l){l.effects[0].element.hide().undoClipping().undoPositioned().setStyle(c)}},
b))};Effect.Pulsate=function(a,b){a=$(a);var c=b||{},e=a.getInlineOpacity(),g=c.transition||Effect.Transitions.linear;return new Effect.Opacity(a,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(k){k.element.setStyle({opacity:e})}},c),{transition:function(k){return 1-g(-Math.cos(k*(c.pulses||5)*2*Math.PI)/2+0.5)}}))};
Effect.Fold=function(a,b){a=$(a);var c={top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};a.makeClipping();return new Effect.Scale(a,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(){new Effect.Scale(a,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(e){e.element.hide().undoClipping().setStyle(c)}})}},b||{}))};
Effect.Morph=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({style:{}},b||{});if(Object.isString(a.style))if(a.style.include(":"))this.style=a.style.parseStyle();else{this.element.addClassName(a.style);this.style=$H(this.element.getStyles());this.element.removeClassName(a.style);var c=this.element.getStyles();this.style=this.style.reject(function(e){return e.value==c[e.key]});a.afterFinishInternal=function(e){e.element.addClassName(e.options.style);
e.transforms.each(function(g){e.element.style[g.style]=""})}}else this.style=$H(a.style);this.start(a)},setup:function(){function a(b){if(!b||["rgba(0, 0, 0, 0)","transparent"].include(b))b="#ffffff";b=b.parseColor();return $R(0,2).map(function(c){return parseInt(b.slice(c*2+1,c*2+3),16)})}this.transforms=this.style.map(function(b){var c=b[0];b=b[1];var e=null;if(b.parseColor("#zzzzzz")!="#zzzzzz"){b=b.parseColor();e="color"}else if(c=="opacity"){b=parseFloat(b);Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&
this.element.setStyle({zoom:1})}else if(Element.CSS_LENGTH.test(b)){e=b.match(/^([\+\-]?[0-9\.]+)(.*)$/);b=parseFloat(e[1]);e=e.length==3?e[2]:null}var g=this.element.getStyle(c);return{style:c.camelize(),originalValue:e=="color"?a(g):parseFloat(g||0),targetValue:e=="color"?a(b):b,unit:e}}.bind(this)).reject(function(b){return b.originalValue==b.targetValue||b.unit!="color"&&(isNaN(b.originalValue)||isNaN(b.targetValue))})},update:function(a){for(var b={},c,e=this.transforms.length;e--;)b[(c=this.transforms[e]).style]=
c.unit=="color"?"#"+Math.round(c.originalValue[0]+(c.targetValue[0]-c.originalValue[0])*a).toColorPart()+Math.round(c.originalValue[1]+(c.targetValue[1]-c.originalValue[1])*a).toColorPart()+Math.round(c.originalValue[2]+(c.targetValue[2]-c.originalValue[2])*a).toColorPart():(c.originalValue+(c.targetValue-c.originalValue)*a).toFixed(3)+(c.unit===null?"":c.unit);this.element.setStyle(b,true)}});
Effect.Transform=Class.create({initialize:function(a,b){this.tracks=[];this.options=b||{};this.addTracks(a)},addTracks:function(a){a.each(function(b){b=$H(b);var c=b.values().first();this.tracks.push($H({ids:b.keys().first(),effect:Effect.Morph,options:{style:c}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var b=a.get("ids"),c=a.get("effect"),e=a.get("options");return[$(b)||$$(b)].flatten().map(function(g){return new c(g,Object.extend({sync:true},
e))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");
Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");
String.prototype.parseStyle=function(){var a,b=$H();if(Prototype.Browser.WebKit)a=(new Element("div",{style:this})).style;else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';a=String.__parseStyleElement.childNodes[0].style}Element.CSS_PROPERTIES.each(function(c){a[c]&&b.set(c,a[c])});Prototype.Browser.IE&&this.include("opacity")&&b.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]);return b};
Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=document.defaultView.getComputedStyle($(a),null);return Element.CSS_PROPERTIES.inject({},function(c,e){c[e]=b[e];return c})}:function(a){a=$(a);var b=a.currentStyle,c;c=Element.CSS_PROPERTIES.inject({},function(e,g){e[g]=b[g];return e});if(!c.opacity)c.opacity=a.getOpacity();return c};
Effect.Methods={morph:function(a,b,c){a=$(a);new Effect.Morph(a,Object.extend({style:b},c||{}));return a},visualEffect:function(a,b,c){a=$(a);b=b.dasherize().camelize();b=b.charAt(0).toUpperCase()+b.substring(1);new Effect[b](a,c);return a},highlight:function(a,b){a=$(a);new Effect.Highlight(a,b);return a}};
$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(b,c){b=$(b);Effect[a.charAt(0).toUpperCase()+a.substring(1)](b,c);return b}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]});Element.addMethods(Effect.Methods);var PP={};PP.util={};PP.resourcebank={};PP.planningDocument={};if(!window.console)window.console={log:function(){},warn:function(){},error:function(){}};document.runOnStartup=[];function createTooltipsForPair(){$$(".ppPair > .ppPairItem").each(function(a){if(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth){a.observe("mousedown",openTooltip);a.observe("mouseup",closeTooltip);a.observe("mouseout",closeTooltip)}})}
function openTooltip(a){var b=a.findElement(".ppPairItem");if(b){var c=new Element("div",{className:"tooltip"});c.update(b.innerHTML);if(a=a.findElement(".ppPair")){c.observe("click",closeTooltip);a.setStyle({position:"relative"});a.insert(c)}}}function closeTooltip(a){(a=a.findElement(".ppPair").down(".tooltip"))&&a.remove()}function addStartupFunction(a){document.runOnStartup.push(a)}
function defaultOnLoad(){document.setup&&document.setup();for(var a=0,b=document.runOnStartup.length;a<b;++a)document.runOnStartup[a]()}function popupWindow(a){return window.open(a,(new Date).getTime(),"height=300,width=500,resizable,scrollbars")}function popupPolicyWindow(a,b,c,e){var g=600,k=1E3;if(typeof c!="undefined")g=c;if(typeof e!="undefined")k=e;(a=window.open(a,"policy:"+b,"height="+g+",width="+k+",resizable,scrollbars"))&&a.focus()}
function popupPersonalDetail(a){(a=window.open(a,(new Date).getTime(),"height=340,width=450,resizable,scrollbars"))&&a.focus()}function popup(a){popupWindow(a)}function popupReadBy(a){(a=window.open(a,(new Date).getTime(),"height=500,width=400,resizable=yes,scrollbars=yes"))&&a.focus()}function popupPim(a){(a=window.open(a,(new Date).getTime(),"resizable=yes,scrollbars=auto,height=580,width=450"))&&a.focus()}
var BK={handleTimeSpanSelect:function(){try{var a=window.top.frames.ppfmain.frames.mc.document.getElementsByTagName("select")[0];a.disabled=true;window.onunload=function(){a.disabled=false}}catch(b){}}};function createHttpRequest(){var a=null;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}}return a}
function setContent(a,b){var c=createHttpRequest();if(c){c.open("GET",b,false);c.send(null);document.getElementById(a).innerHTML=c.responseText}}function byId(a){return document.getElementById(a)}function getElementById(a){return document.getElementById(a)}function getForm(a){return document.forms[a]}function showHideElement(a){if(a=getElementById(a))if(a.style.display=="block"){a.style.display="none";return false}else{a.style.display="block";return true}}
function confirmDialog(a){return confirm(a)}function prepareForRegExp(a){return a.replace(/([()\[\]*.?])/ig,"\\$1")}function getScrollPos(){if(document.compatMode&&document.compatMode=="CSS1Compat")return document.body.parentNode.scrollTop;else if(document.body.scrollTop)return document.body.scrollTop;else if(window.scrollY)return window.scrollY;return 0}function setScrollPos(a){a&&window.scrollTo&&window.scrollTo(0,a)}
function checkEnter(a){a=a||window.event;var b=a.which?a.which:a.keyCode;return(b==13||b==10)&&(a.ctrlKey||a.shiftKey)}function preventEnterSubmitting(a){a=a||window.event;a=a.which?a.which:a.keyCode;return!(a==13||a==10)}function nextFocus(a,b){a=a?a:window.event;a=a.which?a.which:a.keyCode;if(a==10||a==13){$(b).focus();return false}return true}var pixelPerChar=null;function setupAutoResizeTextarea(a){a.style.display="inline";var b=a.scrollWidth;a.style.display="none";pixelPerChar=b/36}
function autoResizeTextarea(a,b,c){pixelPerChar===null&&setupAutoResizeTextarea(c);c=a.offsetWidth-15;for(var e=a.value.split("\n"),g=0,k=0,l=e.length;k<l;++k){g++;if(e[k].length*pixelPerChar>c)g+=e[k].length*pixelPerChar/c}a.rows=g>b?Math.min(parseInt(g),b+25):b}
function autoResizeTextField(a,b){b=Object.extend({minLength:5,marginBeforeIncreasingSize:1,marginBeforeDecreasingSize:10,addedSize:5},b);if(a.size<a.value.length+b.marginBeforeIncreasingSize)a.size=Math.min(100,Math.max(b.minLength,a.value.length+b.addedSize));else if(a.size>a.value.length+b.marginBeforeDecreasingSize)a.size=Math.min(100,Math.max(b.minLength,a.value.length+b.addedSize))}
function checkSelectionListSearch(a,b,c,e,g){a=a||window.event;a=a.which?a.which:a.keyCode;if(a==13||a==10){doSelectionListSearch(b,c,e,g);return false}return true}
function doSelectionListSearch(a,b,c,e){var g=$("asdf"),k=$("qwerty");g.style.display="none";k.style.display="block";for(var l="",p=0,v=document.forms.length;p<v;++p)if(document.forms[p].selectionListSearch){l=document.forms[p].selectionListSearch.value;break}setContent("asdf","/courseId/"+a+"/selectionListSearch.do?selectionListSearch="+l+"&name="+b+"&paramName="+c+"&selectId="+e);k.style.display="none";g.style.display="block"}
function createCookie(a,b,c){var e="";if(c){e=new Date;e.setTime(e.getTime()+c*24*60*60*1E3);e="; expires="+e.toGMTString()}document.cookie=a+"="+b+e+"; path=/"}function readCookie(a){a=a+"=";for(var b=document.cookie.split(";"),c=0,e=b.length;c<e;++c){for(var g=b[c];g.charAt(0)==" ";)g=g.substring(1,g.length);if(g.indexOf(a)===0)return g.substring(a.length,g.length)}return null}function eraseCookie(a){createCookie(a,"",-1)}
function saveScrollPosition(){createCookie("scrollPosition",getScrollPos())}function restoreScrollPosition(){setScrollPos(readCookie("scrollPosition"));eraseCookie("scrollPosition")}addStartupFunction(restoreScrollPosition);function getWindowWidth(a){if(a.innerWidth)return a.innerWidth;if(a.document.documentElement.clientWidth&&a.document.documentElement.clientWidth>0)return a.document.documentElement.clientWidth;return a.document.body.clientWidth}
function getWindowHeight(a){if(a.innerHeight)return a.innerHeight;if(a.document.documentElement.clientHeight&&a.document.documentElement.clientHeight>0)return a.document.documentElement.clientHeight;return a.document.body.clientHeight}getSelectedRadioValue=function(a,b){if(a=getSelectedRadio(a,b))return a.value};getSelectedRadio=function(a,b){if(a=$(a))return a.down('input:checked[type="radio"][name="'+b+'"]')};
PP.cancelPreventDoubleClick=function(){PP.ModalWait.remove();if(typeof window.stop=="function")window.stop();else if(typeof document.execCommand=="function")document.execCommand("Stop");else window.location.href="#";return false};
PP.ModalWait={PARENT_TAG_ID:"main-body-tag",ELEMENT_ID:"modalWait",ELEMENT_MSG_ID:"modalWait_waitMessage",ELEMENT_MSG_CONTAINER_ID:"modalWait_waitMessage_container",ELEMENT_CANCEL_ID:"modalWait_cancel",WAIT_MSG_CLASS:"waitMessage",WAIT_MSG_CONTAINER_CLASS:"waitMessageContainer",WAIT_IMG_CLASS:"waitImage",ELEMENT_CANCEL_CLASS:"cancelModal",VALIDATION_PARENT_TAG:"validate-login",SIMPLE_LAYOUT_PARENT_TAG:"simple-body-tag",effectTimeout:undefined,add:function(a){this._create(a,true)},remove:function(){if(this.effectTimeout){window.clearTimeout(this.effectTimeout);
this.effectTimeout=undefined}var a=$(this.ELEMENT_ID);a&&a.remove();(a=$(this.ELEMENT_MSG_CONTAINER_ID))&&a.remove()},preventDoubleClick:function(){var a=window.i18n||top.i18n;a&&a.doubleClick&&this._create(a.doubleClick.message,true,PP.cancelPreventDoubleClick,a.doubleClick.cancelMessage)},_create:function(a,b,c,e){var g=$(this.PARENT_TAG_ID)||$(this.VALIDATION_PARENT_TAG)||$(this.SIMPLE_LAYOUT_PARENT_TAG);if(g){var k=new Element("div",{className:"modalFog",id:this.ELEMENT_ID,style:"display:none"});
g.insert(k);k.setOpacity(0);k.show();var l=new Element("div",{className:this.WAIT_MSG_CONTAINER_CLASS,id:this.ELEMENT_MSG_CONTAINER_ID,style:"display:none"});if(c&&e){var p=new Element("div",{className:this.ELEMENT_CANCEL_CLASS,id:this.ELEMENT_CANCEL_ID});p.update(e);l.insert(p);p.observe("click",c)}c=new Element("div",{className:this.WAIT_MSG_CLASS,id:this.ELEMENT_MSG_ID});c.update(a);l.insert(c);a=new Element("div",{className:this.WAIT_IMG_CLASS});l.insert(a);g.insert(l);if(b)this.effectTimeout=
window.setTimeout(function(){new Effect.Appear(PP.ModalWait.ELEMENT_ID,{duration:1.5,from:0,to:0.8});new Effect.Appear(PP.ModalWait.ELEMENT_MSG_CONTAINER_ID,{duration:1.5,from:0,to:1})},1337);else{k.setOpacity(0.8);l.show()}}}};
top.enableDoubleClickProtection&&document.observe("dom:loaded",function(){top!=self&&top.PP&&top.PP.ModalWait&&top.PP.ModalWait.remove();$$("form.progressbar,form[name='loginValidationForm']").each(function(a){a.observe("submit",function(){top.PP.ModalWait.preventDoubleClick()})});document.on("click","a:not(.no-progressbar,a[href^='javascript'],a[href*='download'],a[href*='/node.do'],a[href=''],a[href^='mailto'],a[href^='#'],a[onclick],a[target]),a[target='_self']:not(.no-progressbar,a[href^='javascript'],a[href*='download'],a[href*='/node.do'],a[href=''],a[href^='mailto'],a[href^='#'],a[onclick]),a[target='_top']:not(.no-progressbar,a[href^='javascript'],a[href*='download'],a[href*='/node.do'],a[href=''],a[href^='mailto'],a[href^='#'],a[onclick])",
function(){top.PP.ModalWait.preventDoubleClick();if(!window.Touch)if("onbeforeunload"in window){var a=window.onbeforeunload;window.beforeunloadRun=false;window.onbeforeunload=function(){window.beforeunloadRun=true;if(a)return a()};setTimeout(function(){if(!window.beforeunloadRun){top.PP.ModalWait.remove();window.onbeforeunload=a}},250)}})});showErrorMessages=function(){$("error-messages").removeClassName("hide");scrollToElementTopIfNotVisible("error-messages")};
showConfirmMessages=function(a){$("confirm-message").removeClassName("hide");scrollToElementTopIfNotVisible("confirm-message",a)};scrollToElementTopIfNotVisible=function(a,b){var c=document.viewport.getScrollOffsets().top,e=document.viewport.getHeight(),g=$(a).cumulativeOffset().top;if(g<c&&(!b||c-g<b)||g+30>c+e)Effect&&typeof Effect.ScrollTo==="function"?Effect.ScrollTo(a,{duration:"0.2",offset:-8}):$(a).scrollTo()};removeModalWait=function(){PP.ModalWait&&PP.ModalWait.remove()};
resetErrorMessages=function(){var a=$("error-messages-list");a&&a.update("");$$(".error").each(function(b){b.removeClassName("error")});(a=$("error-messages"))&&!a.hasClassName("hide")&&a.addClassName("hide")};resetConfirmMessages=function(){var a=$("confirm-message-list");a&&a.update("");(a=$("confirm-message"))&&!a.hasClassName("hide")&&a.addClassName("hide")};addErrorMessage=function(a){var b=$("error-messages-list");b&&b.insert((new Element("li")).update(a))};
addConfirmMessage=function(a){var b=$("confirm-message-list");b&&b.insert((new Element("li")).update(a))};markFieldError=function(a){var b=$("label-"+a);b&&b.addClassName("error");(a=$(a))&&a.addClassName("error")};debugException=function(a){alert("Exception in '"+a.fileName+"', line: "+a.lineNumber+", type: "+a.name+", message: "+a.message)};
EC_doExpandCollaps=function(a,b,c){var e=$(a),g=$(a+"-img");if(e.hasClassName("hide")||!e.visible()){e.removeClassName("hide");e.addClassName("show");g.src=c}else{e.removeClassName("show");e.addClassName("hide");g.src=b}typeof doExpandCollapseHook=="function"&&doExpandCollapseHook(a,e.hasClassName("show"))};EC_doExpand=function(a,b){var c=$(a);if(c.hasClassName("hide")||!c.visible()){a=$(a+"-img");c.removeClassName("hide");c.addClassName("show");a.src=b}};
function setFrameLocation(a,b){a=$(a);(a.contentWindow.document?a.contentWindow.document:a.contentDocument).location.replace(b)}var uid=function(){var a=0;return function(){return a++}}();PP.resourcebank.callbackFunction=null;
PP.resourcebank.getResource=function(a,b,c){if(b)if(parent&&parent!=self&&parent.PP&&parent.PP.resourcebank)parent.PP.resourcebank.getResource(a,b,c);else{PP.resourcebank.callbackFunction=b;b=$(document.body);a=Object.extend({selectMultiple:false,allowReferences:true,allowSetNewCategoryName:false},a);if(top.courseId)a.courseId=top.courseId;var e=$("resourceBank");if(e){e.update();e.show();e[(c?"add":"remove")+"ClassName"]("lightweight")}else{e=new Element("div",{id:"resourceBank"});c&&e.addClassName("lightweight");
b.insertBefore(e,b.firstChild)}c=new Element("div",{id:"resourceBankModal"});c.addClassName("modalFog");b.insert(c);new Ajax.Updater("resourceBank","/resourceBank.do",{evalScripts:true,parameters:a,asynchronous:false,method:"get",onSuccess:function(){setTimeout(function(){openResourceDialog()},250)}})}else alert("Illegal callback function!")};PP.resourcebank.position=function(){var a=$("resourceBank"),b=document.viewport.getScrollOffsets().top+15;new Effect.Move(a,{y:b,mode:"absolute",duration:0.1})};
function setButtonDisabled(a,b){setControlDisabled(a,b)}function setControlDisabled(a,b){if(a=$(a))(a.disabled=b)?a.addClassName("disabled"):a.removeClassName("disabled")}function iframeSharesOriginWithParent(a){try{return a&&window.location.host===a.contentWindow.location.host&&window.location.protocol===a.contentWindow.location.protocol}catch(b){return false}}var resizedIframes={},oldFrameSize={};
PP.util.resizeFrame=function(a){var b=$(a).identify(),c=null,e=function(){try{PP.util._resizeFrame(b)}catch(g){delete resizedIframes[b];c&&clearInterval(c)}};delete oldFrameSize[b];e();if(Prototype.Browser.Gecko){if(a!==resizedIframes[b]){a.contentWindow.addEventListener("overflow",e,false);a.contentWindow.addEventListener("resize",e,false)}}else resizedIframes[b]||(c=setInterval(e,750));resizedIframes[b]=a};
PP.util.loadMathjax=function(a){a||(a=document);if(a.__mathjaxLoaded)window.MathJax&&window.MathJax.Hub.Queue(["Typeset",MathJax.Hub,a.body]);else{a.__mathjaxLoaded=true;a.body.appendChild((new Element("script",{type:"text/x-mathjax-config"})).update('MathJax.Hub.Config({ displayAlign:"left", messageStyle:"none" })'));a.body.appendChild(new Element("script",{src:"/pp/core/js/mathjax/MathJax.js?config=default"}))}};
function getIframeContentHeight(a){if(navigator.userAgent.indexOf("MSIE")!=-1&&a.contentWindow.document.body)return a.contentWindow.document.body.scrollHeight;else if(a.contentDocument.body)return a.contentDocument.body.clientHeight<a.clientHeight?a.contentDocument.body.clientHeight:a.contentDocument.body.scrollHeight;return null}
PP.util._resizeFrame=function(a){var b=$(a);if(!b){delete oldFrameSize[a];throw"Element is no longer there - removing to prevent memory leak";}if(!iframeSharesOriginWithParent(b)){delete oldFrameSize[a];throw"Iframe no longer share origin with parent";}var c=getIframeContentHeight(b);if(c&&oldFrameSize[a]!=c){var e=document.viewport.getHeight()-b.cumulativeOffset().top-66;b.style.height=Math.max(400,e,c+66)+"px";oldFrameSize[a]=getIframeContentHeight(b)}};
PP.util.firstFormAncestor=function(a){return PP.util.firstAncestorOfType(a,"form")};PP.util.firstAncestorOfType=function(a,b){if(a=$(a)){b=b||"";return a.up(b)}};PP.util.firstAncestorOfClass=function(a,b){if(a=$(a))return a.up(b?"."+b:"")};PP.util.firstDescendantOfClass=function(a,b){if(a=$(a))return a.down(b?"."+b:"")};PP.util.constrainValue=function(a,b,c){var e=a;if(a>c)e=c;else if(a<b)e=b;return e};PP.util.parseIntHandleNaN=function(a){a=parseInt(a);return isNaN(a)?0:a};
PP.util.includeScript=function(a){$$('script[src="'+a+'"]').length===0&&$(documeny.body).insert(new Element("script",{src:a,type:"text/javascript"}))};PP.util.onAvailable=function(a,b){var c=$(a);if(c)b(c);else var e=0,g=setInterval(function(){e++;var k=$(a);if(k){b(k);clearInterval(g)}else e>=1E3&&clearInterval(g)},10)};
var onCondition=function(){function a(g,k,l,p){p=p[g];l[g]=typeof p==k?p:e[g]}function b(g,k){k||(k={});var l=this;l.condition=g;a("timeout","number",l,k);a("interval","number",l,k);a("onAbort","function",l,k);a("onTimeout","function",l,k)}function c(g){if(!g._checking){g._checking=true;var k=false;if(g.aborted){g.onAbort();k=true}else if(+new Date-g.t0>g.timeout){g.onTimeout();k=true}else if(g.condition()){g.action();k=true}g._checking=false;k&&clearInterval(g._timer)}}var e={timeout:2E3,interval:100,
onAbort:function(){},onTimeout:function(){}};b.prototype={constructor:b,execute:function(g){var k=this;if(typeof k.t0=="undefined"){k.t0=+new Date;k.action=g;k._timer=setInterval(function(){c(k)},k.interval);return k}},abort:function(){this.aborted=true}};return function(g,k){return new b(g,k)}}();
PP.listen=function(a,b,c,e){if("addEventListener"in a)PP.listen=function(g,k,l,p){return g.addEventListener(k,l,p)};else if("attachEvent"in a)PP.listen=function(g,k,l){g.attachEvent("on"+k,l)};PP.listen(a,b,c,e)};PP.unlisten=function(a,b,c,e){if("removeEventListener"in a)PP.unlisten=function(g,k,l,p){return g.removeEventListener(k,l,p)};else if("detachEvent"in a)PP.unlisten=function(g,k,l){g.detachEvent("on"+k,l)};PP.unlisten(a,b,c,e)};
PP.featuresCheck=function(){function a(){if(!g){for(var l in k)k[l]();g=true}}function b(l){g||a();return e[l]}var c=this.document,e={},g=false,k={focusin:function(){e.focusin=function(){function l(){p=true}var p=false,v=c.createElement("a");v.href="#";c.body.appendChild(v);PP.listen(v,"focusin",l,false);v.focus();PP.unlisten(v,"focusin",l,false);c.body.removeChild(v);return p}()}};return{hasFeature:b}}();
PP.util.update=function(a,b,c){$(a).innerHTML='<div style="width: 100%; text-align: center;"><img src="/pp/lookAndFeel/standard/icons/wait_small.gif" /></div>';new Ajax.Updater(a,b,c)};PP.util.getModBeanMessage=function(a){for(var b=a,c=1,e=arguments.length;c<e;++c)b=b.replace("arg"+(c-1),arguments[c]);return b};var setElemAttributes=function(a,b){(a=$(a))&&b&&$H(b).each(function(c){a[c.key]=c.value})};PP.util.logException=function(a,b){PP.util.logMessage(b+". Exception: "+Object.toJSON(a))};
PP.util.logMessage=function(a){new Ajax.Request("/log.do",{asynchronous:false,parameters:{message:a}})};PP.util.debugHttpRequest=function(a){var b="transport, state=";try{b+=a.status}catch(c){b+=c.message}try{b+=", headers="+a.getAllResponseHeaders()}catch(e){}return b};
function asciiee(){Math.random()<0.9||$$("h1").each(function(a){new Ajax.Request("/figlet.do",{parameters:{html:a.innerHTML},onSuccess:function(b){$$(".asciiee").each(function(c){$(c).remove()});b=(new Element("pre",{"class":"asciiee",style:{fontWeight:"normal",fontSize:"7px"}})).update(b.responseText);$(a).hide();$(a).insert({after:b})}})})}
function setCookie(a,b,c,e,g,k){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(e?"; path="+e:"")+(g?"; domain="+g:"")+(k?"; secure":"")}function getCookie(a){var b=document.cookie;a=a+"=";var c=b.indexOf("; "+a);if(c==-1){c=b.indexOf(a);if(c!=0)return null}else c+=2;var e=document.cookie.indexOf(";",c);if(e==-1)e=b.length;return unescape(b.substring(c+a.length,e))}
function deleteCookie(a,b,c){if(getCookie(a))document.cookie=a+"="+(b?"; path="+b:"")+(c?"; domain="+c:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}
PP.Flapify=Class.create({initialize:function(a,b,c){if(!($$(b).length<a)){var e=1,g=0,k=null,l=[];$$(b).eachSlice(a).each(function(p){g+=p.length;var v="flapify-flap-"+e+"-"+g,o="flapify-flap-content-"+e+"-"+g;if(k==null)k=o;v=new Element("div",{"class":"flapify-flap",id:v});v.update((e!=1?"|":"")+"&nbsp;<a href='#' onclick=\"PP.Flapify._flapifySwitch('"+o+"'); return false\">"+e+"-"+g+"</a>&nbsp;");$(c).insert({bottom:v});var u=new Element("div",{"class":"flapify-flap-content",id:o});l.push(u);p.each(function(D){$(u).insert({bottom:D})});
e+=p.length});a=new Element("div",{"class":"clearfix"});$(c).insert({bottom:a});l.each(function(p){$(c).insert({bottom:p})});PP.Flapify._flapifySwitch(k)}}});PP.Flapify._flapifySwitch=function(a){$$(".flapify-flap-content").each(function(b){b.hide()});$(a).show()};
var ISODateFormat=function(){function a(l){typeof l=="undefined"&&(l=k.date);this.type=l}function b(l){var p;return p=[e(l.getFullYear(),4),e(l.getMonth()+1,2),e(l.getDate(),2)].join("-"),this.type===k.dateTime&&(p+=" "+[e(l.getHours(),2),e(l.getMinutes(),2)].join(":")),p}function c(l){var p=null;l=g.exec(l);var v,o,u,D=0,E=0,J=0;if(l){v=~~l[1];o=~~l[2];u=~~l[3];if(l[4]){if(this.type!=k.dateTime)return null;D=~~l[4];E=~~l[5];l[6]&&(J=~~l[6])}else if(this.type!=k.date)return null;p=new Date(v,o-1,
u,D,E,J);p.getFullYear()!==v||p.getMonth()!==o-1||p.getDate()!==u?(p=null):this.type==k.dateTime&&(p.getHours()!==D||p.getMinutes()!==E)&&(p=null)}return p}function e(l,p){l=""+l;return Array(1+p-l.length).join("0")+l}var g=/^\s*(\d{4})-([01]\d)-([0123]\d)[T ]?(?:(\d{2}):(\d{2})(?::(\d{2}))?)?\s*$/;a.prototype={constructor:a,parse:c,format:b};var k={date:"date",dateTime:"dateTime"};return{date:"date",dateTime:"dateTime",create:function(l){return new a(l)}}}(),parseISODateTime=function(a){if((a=a.match(/(\d+)/g))&&
a.length>=5)return new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]||0,0);return null},getAsISODateTime=function(a){var b=a.getFullYear();b+="-"+(a.getMonth()+1).toPaddedString(2);b+="-"+a.getDate().toPaddedString(2);b+=" "+a.getHours().toPaddedString(2);b+=":"+a.getMinutes().toPaddedString(2);return b},srcExtractor=function(a){function b(v){var o=this;o.srces={}.toString.call(v)=="[object Array]"?v:[];o.srcCount=o.srces.length;o.callback=null}function c(v){++v.loadedCount;e(v)}function e(v){v.loadedCount===
v.needLoad&&v.callback&&v.callback.call(null,v)}function g(v){for(var o,u=[];o=p.exec(v);)u.push(o[1]);return u}var k=a.document,l={};b.prototype.loadAll=function(v){var o=this;o.loadedCount=0;typeof v=="function"&&(o.callback=v);o.needLoad=o.srcCount;for(var u=0,D;u<o.srcCount;++u){v=k.createElement("script");v.type="text/javascript";D=o.srces[u];if(l[D]){o.needLoad-=1;e(o)}else{v.src=D;v.onload=function(E,J){return function(){l[E]=true;c(o,E,J)}}(D,u);k.body.appendChild(v)}}o.srcCount==0&&o.callback&&
o.callback.call(null,o)};b.prototype.list=function(){return this.srces};var p=/<script.*?src=['"]?([^>"']+)['"]?[^>]+><\/script>/g;return{from:function(v){return new b(g(typeof v=="string"?v:""))}}}(this),createChosen=function(){function a(){return typeof Chosen=="function"&&Event&&typeof Event.simulate=="function"}function b(l){var p,v,o,u={count:0,wanted:0,handleEvent:function(){++u.count==u.wanted&&u.onLoaded()},onLoaded:function(){a()?l():onCondition(a,{timeout:5E3,interval:100}).execute(l)}};
for(v in e)u.wanted+=e[v].length;for(v in e){p=e[v];for(var D=0,E=p.length;D<E;++D){if(v=="js"){o=g.createElement("script");o.type="text/javascript";o.src=p[D];o.onload=o.onreadystatechange=function(){this.onreadystatechange=this.onload=null;u.handleEvent()}}else if(v=="css"){o=g.createElement("link");o.rel="stylesheet";o.type="text/css";o.href=p[D];o.onload=u.handleEvent}(k||g.body).appendChild(o)}}}function c(l,p){l=$(l);if(!(!l||l.hasClassName("chzn-done"))){var v=l.title;v&&l.writeAttribute("data-placeholder",
v);l.writeAttribute("data-no_results_text",p||"-");new Chosen(l)}}var e={js:["/pp/core/js/chosen.proto.js","/pp/core/js/event.simulate.js"],css:["/pp/lookAndFeel/standard/css/chosen.css"]},g=this.document,k=g.getElementsByTagName("head")[0];return function(l,p){if(a()){createChosen=c;createChosen(l,p)}else b(function(){createChosen=c;createChosen(l,p)})}}(),openPopupFromClickableContainer=function(){var a={selector:"a",popupOptions:"height=600,width=700,resizable,scrollbars",popupName:null};return function(b,
c){if(b=$(b)){c&&"object"==typeof c||(c={});var e="string"==typeof c.popupOptions?c.popupOptions:a.popupOptions,g="string"==typeof c.popupName?c.popupName:a.popupName;if(b=b.down("string"==typeof c.selector?c.selector:a.selector)){b=b.href;g===null&&(g=b);if(e=window.open(b,g,e)){e.focus();return true}}return false}}}(),Dict=function(){function a(){this._store={}}var b={}.hasOwnProperty,c={}.toString,e="[object Function]"==c.call(Object.keys)?Object.keys:function(g){var k=[];for(var l in g)b.call(g,
l)&&k.push(l);return k};a.prototype={constructor:a,get:function(g){return this._store[g]},set:function(g,k){var l=this;l._store[g]=k;return l},putAll:function(g){var k=this;for(var l in g)b.call(g,l)&&k.set(l,g[l]);return k},"delete":function(g){var k=this;delete k[g];return k},clearAll:function(){var g=this;g._store={};return g},getKeys:function(g){return e(this._store).sort(g)}};return{create:function(g){var k=new a;"[object Object]"==c.call(g)&&k.putAll(g);return k}}}();function openPageHelp(a){if(a.match("^_planner."))a="_planner.start";else if(a.match("^_schema"))a="_tools.schema";else if(a.match("^_iup.admin"))a="_iup.admin";else if(a.match("^_iup."))a="_iup.personal.info";else if(a.match("^_core.invitations.admin"))a="_core.invitations.admin";else if(a.match("^_core.invitations.person"))a="_core.invitations.admin";else if(a.match("^_calendarResource"))a="_calendarResource.overview";else if(a.match("^_cheatcheckAccount"))a="_cheatcheckAccount.overview";else if(a.match("^_core.course."))a=
"_core.course.mycourses";else if(a.match("^_tools.executive.approval"))a="_tools.executive.approval";else if(a.match("^calendar"))a="_tools.calendar";else if(a.match("^_actionprogram"))a=a.match("^_actionprogram.admin")?"_actionprogram.admin":a.match("^_actionprogram.mentor")?"_actionprogram.mentor":a.match("^_actionprogram.teacher")?"_actionprogram.teacher":a.match("^_actionprogram.student")?"_actionprogram.student":a.match("^_actionprogram.parent")?"_actionprogram.parent":a.match("^_actionprogram.headmaster")?
"_actionprogram.headmaster":"_actionprogram";else if(a.match("^_tools.parentRegistrations"))a="_tools.parentRegistrations";a=helpPageUrl+a;if(window.getState){var b=getState().page;if($("editContentNewFormMarker"))a+="&contentEditorPageId=Laggtill";else if(b=="new")a+="&contentEditorPageId=Laggtill";else if(b=="publish")a+="&contentEditorPageId=Publicering";else if(b=="trashcan")a+="&contentEditorPageId=Papperskorg";else if(b=="usedFiles")a+="&contentEditorPageId=filer";else if(b=="questionBankTest")a+=
"&contentEditorPageId=Fragebank";else if(b=="questionBankPoll")a+="&contentEditorPageId=enkatfragor";else if(b=="theme_settings")a+="&contentEditorPageId=Utseende";else if(b=="properties"||b=="visibility"||b=="revisions"||b=="testSettings"||b=="groupReportSubmission"||b=="htmlFiles"||b=="preview"||b=="default")if(top.currentResourceType)switch(top.currentResourceType){case 79:a+="&contentEditorPageId=Sida";break;case 65:a+="&contentEditorPageId=Lank";break;case 81:a+="&contentEditorPageId=Inlamningsuppgift";
break;case 67:switch(top.currentTestType){case 0:a+="&contentEditorPageId=Test";break;case 1:a+=top.currentPollTreatAnonymous?"&contentEditorPageId=Enkat":"&contentEditorPageId=Formular";break}break}else a+="&contentEditorPageId=Mapp";else if(b=="edit")a+=top.currentResourceType==65?"&contentEditorPageId=Lank":"&contentEditorPageId=Textredigeraren"}a=window.open(a,"PPHelp","width=650,height=550,scrollbars,toolbar,resizable,left=0,top=0");focusOrComplain(a)}
function startAdmin(a){var b="/pp/system/at/frameset.jsp";if(a)b+="?shortcut=course_assign&course_id="+a;a=window.open(b,"PPAdmin","width="+atWidth+",height="+atHeight+",status=yes,resizable");focusOrComplain(a)}function startSkill(){var a=window.open("/servlets/KM?frame=Frameset","PPSkill","width=784,height=550,status=yes,left=0,top=0");focusOrComplain(a)}
function openCalendar(a,b,c){b=!!b;var e=calendarUrl;if(a){e+="?iso_date="+a;e+=c?"&view="+c:"&view=day"}else{e+="?mode=start";if(c)e+="&view="+c}if(courseId&&!b)e+="&course_id="+courseId;a=window.open(e,"ppcalendar","scrollbars,resizable,width=900,height=650");focusOrComplain(a)}function openCalendarTodos(a,b){a=window.open("/pp/system/calendar/cal_todos.jsp?order_by="+a+"&asc="+b,"ppcalendar","scrollbars,resizable,width=900,height=650");focusOrComplain(a)}
function openNotepad(){var a="/pp/system/notepad/notepad.jsp";if(courseId)a+="?course_id="+courseId;a=window.open(a,"ppnotepad","scrollbars,resizable,width=570,height=550");focusOrComplain(a)}function openCalculator(){var a=window.open("/pp/system/calculator.jsp","ppcalculator","resizable,width=400,height=300");focusOrComplain(a)}
function openGuide(){lang=="sv"||lang=="en"||(lang="en");var a=window.open("/pp/system/guide/"+lang+"/?v="+ppVersion,"ppguide","width=800,height=600");focusOrComplain(a)}function startChat(a,b,c){var e="/courseId/"+a;if(c)e+="/projectGroup/"+c;e+="/chatRoom.do";if(b)e+="?channelId="+b;a=window.open(e,"PPChat"+a,"width=880,height=550,status=no,resizable,left=0,top=0");focusOrComplain(a)}function doProgress(a){doProgressWithSectorInfo(a,"")}
function doProgressWithSectorInfo(a,b){a=window.open("/servlets/Init/"+a+"/AZ?zone=progress"+b,"PPProgress","width=1024,height=700,status,resizable");focusOrComplain(a)};PP=PP||{};PP.util=PP.util||{};PP.util.Dialog=Class.create({});
Object.extend(PP.util.Dialog,{_PPDdefaultDimensions:{width:"760px",height:"560px"},_PPDdimensions:{},_PPDoverlayID:"PPDoverlay",_PPDcontainerID:"PPDcontainer",_PPDcontentID:"PPDcontent",_PPDcontentHeaderID:"PPDcontentHeader",_PPDcontentBodyID:"PPDcontentBody",_PPDcloseIconID:"PPDcloseIcon",_PPDajaxWaitClassName:"PPDajaxWait",_PPDindicateUpdateClassName:"PEindicateUpdate",open:function(a,b,c){PP.util.Dialog.open2(b,{headerText:a,dimensions:c})},open2:function(a,b){PP.util.Dialog._isOpen=true;b.headerText&&
PP.util.Dialog._setHeaderText(b.headerText);PP.util.Dialog._create(b);PP.util.Dialog._setContent(a);PP.editor&&PP.editor.handleEditorControls(false);PP.util.Dialog._loadContent()},_isOpen:false,isOpen:function(){return PP.util.Dialog._isOpen},close:function(){PP.util.Dialog._isOpen=false;PP.util.Dialog._closeIcon&&PP.util.Dialog._closeIcon.stopObserving("click",PP.util.Dialog._closeListener);Element.remove(PP.util.Dialog._PPDcontainer);Element.remove(PP.util.Dialog._PPDoverlay);PP.editor&&PP.editor.handleEditorControls(true)},
update:function(a,b){PP.util.Dialog.update2({headerText:a,content:b})},update2:function(a){a.headerText&&PP.util.Dialog.updateContent(a.headerText);a.content&&PP.util.Dialog.updateContent(a.content)},updateContent:function(a){if(PP.util.Dialog._PPDcontentBody){a&&PP.util.Dialog._setContent(a);PP.util.Dialog._loadContent()}else throw"No dialog created";},updateHeader:function(a){if(PP.util.Dialog._PPDcontentBody){PP.util.Dialog._setHeaderText(a);PP.util.Dialog._getHeader().update(a)}else throw"No dialog created";
},indicateUpdate:function(a){(a=!!a)?Element.addClassName(PP.util.Dialog._PPDcontentBody,PP.util.Dialog._PPDindicateUpdateClassName):Element.removeClassName(PP.util.Dialog._PPDcontentBody,PP.util.Dialog._PPDindicateUpdateClassName)},_setContent:function(a){PP.util.Dialog._content=a||"''"},_setHeaderText:function(a){PP.util.Dialog._headerText=a},_setAjaxWait:function(a){(a=!!a)?Element.addClassName(PP.util.Dialog._PPDcontentBody,PP.util.Dialog._PPDajaxWaitClassName):Element.removeClassName(PP.util.Dialog._PPDcontentBody,
PP.util.Dialog._PPDajaxWaitClassName)},_getBody:function(){if(!PP.util.Dialog._PPDcontentBodyID)throw"No content body id set";return $(PP.util.Dialog._PPDcontentBodyID)},_getHeader:function(){if(!PP.util.Dialog._PPDcontentHeaderID)throw"No content header id set";return $(PP.util.Dialog._PPDcontentHeaderID)},getWidth:function(){return PP.util.Dialog._PPDdimensions.width},getHeight:function(){return PP.util.Dialog._PPDdimensions.height},_create:function(a){PP.util.Dialog._PPDdimensions=a&&a.dimensions?
a.dimensions:PP.util.Dialog._PPDdefaultDimensions;var b=$(document.body);Element.getDimensions(b);var c=new Element("div",{id:PP.util.Dialog._PPDoverlayID});Element.insert(b,{top:c});var e=new Element("div",{id:PP.util.Dialog._PPDcontainerID});Element.insert(b,{top:e});var g=document.viewport.getScrollOffsets()[1]+20+"px";b=new Element("div",{id:PP.util.Dialog._PPDcontentID});Element.setStyle(b,{marginTop:g});g=PP.util.Dialog.getWidth();Element.setStyle(b,{width:g});g=PP.util.Dialog.getHeight();if(g===
null)g="300px";Element.setStyle(b,{height:g});if(a.skipCloseIcon!==true){g={id:PP.util.Dialog._PPDcloseIconID,src:"/pp/lookAndFeel/standard/icons/delete.gif"};var k=typeof lang==="string"?{sv:"St\u00e4ng",en:"Close",de:"Schliessen"}[lang]:null;if(k)g.title=k;g=new Element("img",g);Element.insert(b,{bottom:g});PP.util.Dialog._closeIcon=g;PP.util.Dialog._closeListener=PP.util.Dialog._closeIcon.observe("click",PP.util.Dialog.close)}Element.insert(e,{top:b});if(!a.noHeader){var l=new Element("div",{id:PP.util.Dialog._PPDcontentHeaderID});
Element.setStyle(l,{position:"relative"});l.update(PP.util.Dialog._headerText);Element.insert(b,{top:l})}a=new Element("div",{id:PP.util.Dialog._PPDcontentBodyID});Element.insert(b,{bottom:a});PP.util.Dialog._PPDoverlay=c;PP.util.Dialog._PPDcontainer=e;PP.util.Dialog._PPDcontent=b;PP.util.Dialog._PPDcontentHeader=l;PP.util.Dialog._PPDcontentBody=a},_loadContent:function(){if(typeof PP.util.Dialog._content==="string")PP.util.Dialog._PPDcontentBody.update(PP.util.Dialog._content);else if(PP.util.Dialog._content instanceof
Object)if(PP.util.Dialog._content.nodeType===1)PP.util.Dialog._PPDcontentBody.appendChild(PP.util.Dialog._content);else if("url"in PP.util.Dialog._content){PP.util.Dialog._loadContentFromAjax();return}PP.util.Dialog.getHeight()===null&&Element.setStyle(PP.util.Dialog._PPDcontent,{height:"auto"})},_loadContentFromAjax:function(){var a=PP.util.Dialog._content.url,b=PP.util.Dialog._content.params||{};PP.util.Dialog._setAjaxWait(true);new Ajax.Updater(PP.util.Dialog._PPDcontentBody.identify(),a,{parameters:b,
onComplete:PP.util.Dialog._onComplete,evalScripts:true})},_onComplete:function(){PP.util.Dialog._setAjaxWait(false);PP.util.Dialog.getHeight()===null&&Element.setStyle(PP.util.Dialog._PPDcontent,{height:"auto"})}});
PP.util.CheckboxGroup=Class.create({initialize:function(a,b,c){this._masterBox=$(a);this._slaveBoxesSelector="input[type=checkbox]."+b;this._slaveBoxes=$$(this._slaveBoxesSelector);this._options={};for(prop in PP.util.CheckboxGroup._defaultOptions)this._options[prop]=c&&c[prop]?c[prop]:PP.util.CheckboxGroup._defaultOptions[prop];this.update()},update:function(){this._slaveBoxes=$$(this._slaveBoxesSelector);this._setUpClickHandlers()},_removeListeners:function(){if(this._masterBoxListener){this._masterBox.stopObserving("click");
this._slaveBoxes.each(function(a){a.stopObserving("click")})}},_setUpClickHandlers:function(){this._removeListeners();this._masterBoxListener=this._masterBox.observe("click",this._handleMasterBoxClick.bind(this));var a=this;this._slaveBoxes.each(function(e){e.observe("click",a._handleSlaveBoxClick.bind(a))});var b=PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes),c=PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes);this._invokeCallback(b,b-c)},_handleMasterBoxClick:function(a){var b=
PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes),c=this;this._slaveBoxes.each(function(g){g.checked=c._masterBox.checked});var e=this._masterBox.checked?this._slaveBoxes.length:0;this._invokeCallback(e,e-b,a)},_handleSlaveBoxClick:function(a){var b=a.element(),c=PP.util.CheckboxGroup.getNrOfCheckedBoxes(this._slaveBoxes),e=c+(b.checked?-1:+1);if(b.checked){if(c==this._slaveBoxes.length)this._masterBox.checked=true}else if(this._masterBox.checked)this._masterBox.checked=false;this._invokeCallback(c,
c-e,a)},_invokeCallback:function(a,b,c){if(this._options.callback){var e=a<1;this._options.callback({delta:b,checked:a,unChecked:this._slaveBoxes.length-a,empty:e,full:!e&&a==this._slaveBoxes.length,iceBreaker:!e&&a==b},c)}}});
Object.extend(PP.util.CheckboxGroup,{getNrOfCheckedBoxes:function(a){return a.findAll(function(b){return b.checked}).length},_defaultOptions:{callback:function(a,b){PP.util.CheckboxGroup._defaultCallback(a,b)}},_defaultCallback:function(a,b){PP.util.CheckboxGroup._emptyFunction(a,b)},_emptyFunction:function(){},_report_debug:function(a){alert($H(a).inspect())}});
PP.util.FormStateChecker=Class.create({initialize:function(a,b){a=$(a);this._originalState=PP.util.FormStateChecker.formState(a);this._formSubmits=a.select("input[type=submit]");this._callback=b;this._setUpFormListeners(a);this._checkState(a)},_setUpFormListeners:function(a){var b=a.select(PP.util.FormStateChecker.CONTROLS_TO_LISTEN_FOR);that=this;b.each(function(c){c.type=="text"||c.type=="textarea"?c.observe("keyup",function(){that._checkState(a)}):c.observe("change",function(){that._checkState(a)})})},
_checkState:function(a){var b=this._isOriginalState(a);if(this._callback)return this._callback(a,b);return this._defaultCallback(a,b)},_isOriginalState:function(a){return PP.util.FormStateChecker.formState(a)==this._originalState},_defaultCallback:function(a,b){this._enableOrDisableSubmitButtons(a,b)},_enableOrDisableSubmitButtons:function(a,b){this._formSubmits.each(function(c){setButtonDisabled(c,b)})}});
Object.extend(PP.util.FormStateChecker,{CONTROLS_TO_LISTEN_FOR:$A(["input[type!=submit][type!=password][type!=hidden][type!=file][type!=button]","textarea","select"]),formState:function(a){return $(a).serialize()}});
PP.debugArea=Class.create({initialize:function(a){this._element=$(a);if(!this._element)throw"PP.debugArea: didn't find area: "+a;},put:function(a){this._element.update(PP.debugArea.createDebugEntry(a))},append:function(a,b){b=b||PP.debugArea._defaultDelim;this._element.update(this.getContent()+b+PP.debugArea.createDebugEntry(a))},clear:function(){this._element.update()},getContent:function(){return this._element.innerHTML}});
Object.extend(PP.debugArea,{createDebugEntry:function(a){return'<span style="font-weight: bold;">'+PP.debugArea._timeStr(new Date)+"</span> - "+a},_timeStr:function(a){var b=a.getHours(),c=a.getMinutes();a=a.getSeconds();return"#{hours}:#{minutes}:#{seconds}".interpolate({hours:(b<10?"0":"")+b,minutes:(c<10?"0":"")+c,seconds:(a<10?"0":"")+a})},_defaultDelim:"<br />"});if(!PP.guiHelpers)PP.guiHelpers={};
PP.guiHelpers.simulateLabelClick=function(a){var b=$(a);if(b)b.click();else throw new Error("PP.guiHelpers.simulateLabelClick() found no control with id '"+a+"'");};PP.guiHelpers.focusFirstElement=function(a){if(a=$(a))return Form.focusFirstElement(a)};PP.guiHelpers.redirectFocus=function(a,b,c){a=$(a);b=$(b);a&&b&&a.observe("click",function(){if(a.type=="radio"||a.type==="checkbox"&&$F(a)==="on")c&&c.effect?[b].invoke(c.effect):b.focus()})};
PP.util.FireBug=Object.extend({log:function(a){PP.util.FireBug._sendToConsole(a,"log")},warn:function(a){PP.util.FireBug._sendToConsole(a,"warn")},error:function(a){PP.util.FireBug._sendToConsole(a,"error")},_hasConsole:function(){return!!top.console},_sendToConsole:function(a,b){PP.util.FireBug._hasConsole()&&console[b](PP.util.FireBug._getLogTimeString()+" - "+a)},_getLogTimeString:function(a){a=a||new Date;var b=a.getHours(),c=a.getMinutes();a=a.getSeconds();return"#{hours}:#{minutes}:#{seconds}".interpolate({hours:(b<
10?"0":"")+b,minutes:(c<10?"0":"")+c,seconds:(a<10?"0":"")+a})}});PE={Ui:{}};
PE.Ui.Dp=Class.create({initialize:function(a,b){this.target=a;this._setOptions(b);this.elems={};this.observers={};if(this.options.initialDate){if(typeof this.options.initialDate=="string")this.options.initialDate=this._parseDate(this.options.initialDate);this._setDate(this.options.initialDate);this._updateTarget(this.DATE)}this._createWidget();this._setupListeners()},_setOptions:function(a){this.options=a},GET:function(a){switch(a){case PE.Ui.Dp.YEAR:return this.DATE.getFullYear();case PE.Ui.Dp.MONTH_IDX:return this.DATE.getMonth();
case PE.Ui.Dp.DAY_OF_MONTH:return this.DATE.getDate();case PE.Ui.Dp.WEEKDAY_IDX:return this.DATE.getDay();case PE.Ui.Dp.HOURS:return this.DATE.getHours();case PE.Ui.Dp.MINUTES:return this.DATE.getMinutes();case PE.Ui.Dp.DAYS_IN_MONTH:return PE.Ui.Dp.getDaysInMonth(this.DATE);case PE.Ui.Dp.WEEKDAY_IDX_OF_MONTH_START:return PE.Ui.Dp.weekdayIdxOfMonthStart(this.DATE);case PE.Ui.Dp.IS_LEAPYEAR:return PE.Ui.Dp.isLeapYear(this.DATE);default:break}},_setDate:function(a){this.DATE=a||new Date},getPickerDate:function(){return this.DATE},
_updateTarget:function(a){this._setTargetValue(this._getDateString(a));this.options.validate&&this._validatorListener()},_getDateString:function(a){var b=(a.getMonth()+1).toPaddedString(2),c=a.getDate().toPaddedString(2);b="#{year}-#{month}-#{day}".interpolate({year:a.getFullYear(),month:b,day:c});if(this.options.useTime){c=a.getHours().toPaddedString(2);a=a.getMinutes().toPaddedString(2);b="#{date} #{hour}:#{minute}".interpolate({date:b,hour:c,minute:a})}return b},_setTargetValue:function(a){this.target.value=
a},_createWidget:function(){this.elems.widget=new Element("span",{className:"PEDp"});this.elems.widget.setStyle({display:"none"});this._buildTable();this._populateTable()},_attachWidget:function(){this.target.insert({after:this.elems.widget});var a=new Element.Layout(this.target),b=a.get("left");this.elems.widget.setStyle({height:"",width:"",top:a.get("top")+this.target.getHeight()+"px",left:b+"px"})},_setupListeners:function(){this.observers.target=this._targetListener.bind(this);this.target.observe("click",
this.observers.target);this.target.observe("focus",this.observers.target);if(this.options.validate){this.observers.validator=this._validatorListener.bind(this);this.target.observe("change",this.observers.validator)}this.observers.table=this._handleTableClick.bind(this);this.elems.table.observe("click",this.observers.table);if(this.options.useTime){this.observers.time=this._handleSelectChange.bind(this);this.elems.time.observe("change",this.observers.time)}},tearDownListeners:function(){this.target.stopObserving("click",
this.observers.target);this.elems.table.stopObserving("click",this.observers.table);this.options.useTime&&this.elems.time.stopObserving("change",this.observers.time)},_targetListener:function(a){var b=a.element();if(!(b.readAttribute("readonly")==="readonly"||b.readAttribute("disabled")==="disabled")){a.stop();PE.Ui.Dp.hideOthers(this);this._setDate(this._parseDateFromTarget());this._populateTable();this._attachWidget();this.elems.widget.show()}},_validatorListener:function(){var a=this.target.getValue(),
b=this.options.useTime?/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2})$/:/^(\d{4})-(\d{2})-(\d{2})$/,c=true;if(!a.blank()){var e=b.exec(a);if(e){a=parseInt(e[1],10);b=parseInt(e[2],10);e=parseInt(e[3],10);var g=new Date(a,b-1,e);g.getFullYear()==a&&g.getMonth()+1==b&&g.getDate()==e||(c=false);if(c&&this.options.useTime){c=parseInt(parts[3],10);a=parseInt(parts[4],10);c=c>=0&&c<=23&&a>=0&&a<=59}}else c=false}this.target[(c?"remove":"add")+"ClassName"]("error")},_parseDate:function(a){var b=new Date,c="",
e="";if(!a.blank()){b.setDate(1);a=a.split(/[\s:-]/);if(a.length>2){var g=a[0].strip(),k=a[1].strip();e=a[2].strip();g.match(/^[0-9]{4}$/)&&b.setFullYear(g);k.match(/^[0-9]{1,2}$/)&&k>=1&&k<=12&&b.setMonth(k-1);g=PE.Ui.Dp.getDaysInMonth(b);if(e.match(/^[0-9]{1,2}$/)&&e>0)if(e<=g)b.setDate(e);else if(e<=31){this.elems.overflowDate.value=e;b.setDate(g)}}if(this.options.useTime)if(a.length>4){e=a[3].strip();e.match(/^[0-9]{1,2}$/)&&e>-1&&e<24&&b.setHours(e);c=a[4].strip()}}if(c.blank()||!(c.match(/^[0-9]{1,2}$/)&&
c>-1&&c<60))c=b.getMinutes();a=this.options.minutesInterval;e=c%a;if(e>Math.floor(a/2))e=-(a-e);b.setMinutes(c-e);b.setSeconds(0);return b},_parseDateFromTarget:function(){return this._parseDate($F(this.target))},_setSelectedDate:function(a){this.elems.dates.invoke("removeClassName","selected");a.addClassName("selected");this.DATE.setDate(a.innerHTML)},_buildTable:function(){var a=new Element("table"),b=new Element("tbody");a.insert(b);var c=this.options.useWeekNr,e=c?"8":"7",g=new Element("tr",{className:"year"}),
k=new Element("td",{colspan:e}),l=(new Element("span",{className:"subtractYear"})).update("&nbsp;&nbsp;&nbsp;");k.insert(l);l=new Element("span",{className:"year"});l.update("");k.insert(l);l=(new Element("span",{className:"addYear"})).update("&nbsp;&nbsp;&nbsp;");k.insert(l);g.insert(k);b.insert(g);g=new Element("tr",{className:"month"});k=new Element("td",{className:"month",colspan:e});l=(new Element("span",{className:"subtractMonth"})).update("&nbsp;&nbsp;&nbsp;");k.insert(l);l=new Element("span",
{className:"name"});l.update("");k.insert(l);l=(new Element("span",{className:"addMonth"})).update("&nbsp;&nbsp;&nbsp;");k.insert(l);l=new Element("input",{className:"idx",type:"hidden",value:""});k.insert(l);l=new Element("input",{className:"overflowDate",type:"hidden",value:""});k.insert(l);g.insert(k);b.insert(g);g=new Element("tr",{className:"weekdayNames"});if(c){k=(new Element("td",{className:"weekNumberLabel"})).update(PE.Ui.Dp.texts.weekShort[this.options.lang]);g.insert(k)}for(l=0;l<7;l+=
1){k=(new Element("td")).update(PE.Ui.Dp.weekdayNames[this.options.lang][l]);g.insert(k)}b.insert(g);for(l=0;l<6;l+=1){g=new Element("tr",{className:"dates"});b.insert(g);if(c){k=new Element("td",{className:"week-nr"});k.insert(new Element("div"));g.insert(k)}for(var p=0;p<7;p+=1){k=new Element("td",{className:"date"});g.insert(k)}}if(this.options.useTime){g=new Element("tr",{className:"time"});b.insert(g);k=new Element("td",{colspan:e});c=(new Element("label")).update(PE.Ui.Dp.texts.time[this.options.lang]+
":&nbsp;");k.insert(c);var v;c=new Element("select",{className:"hours"});for(v=0;v<24;v+=1){p=v.toPaddedString(2);l=new Element("option",{value:p});l.update(p);c.insert(l)}k.insert(c);c=new Element("select",{className:"minutes"});for(v=0;v<60;v+=this.options.minutesInterval){p=v.toPaddedString(2);l=new Element("option",{value:p});l.update(p);c.insert(l)}k.insert(c);g.insert(k);g=new Element("tr",{className:"submit"});e=new Element("td",{colspan:e});e.insert(new Element("input",{type:"button",value:PE.Ui.Dp.buttons.done[this.options.lang],
className:"selectAndClose"}));g.insert(e);b.insert(g)}this.elems.widget.insert(a);this.elems.table=a;this.elems.year=a.down("tr.year td .year");this.elems.monthName=a.down("tr.month td .name");this.elems.monthIdx=a.down("tr.month td .idx");this.elems.dates=a.select("tr.dates td.date");this.elems.weeks=a.select("tr.dates td.week-nr div");this.elems.time=a.down(".time td");this.elems.hours=a.down(".hours");this.elems.minutes=a.down(".minutes");this.elems.overflowDate=a.down(".overflowDate");this.elems.submit=
a.down(".selectAndClose")},_populateTable:function(){if(this.DATE){this.elems.year.update(this.GET(PE.Ui.Dp.YEAR));var a=this.GET(PE.Ui.Dp.MONTH_IDX);this.elems.monthName.update(PE.Ui.Dp.monthNames[this.options.lang][a]);this.elems.monthIdx.value=a;var b=this.GET(PE.Ui.Dp.WEEKDAY_IDX_OF_MONTH_START),c=this.GET(PE.Ui.Dp.DAYS_IN_MONTH),e=this.GET(PE.Ui.Dp.DAY_OF_MONTH),g=1;a=this.options.useWeekNr;var k=0;this.elems.dates.each(function(p,v){g<=c&&++k;if(v+1>b&&g<=c){p.update(g).removeClassName("empty");
g===e?p.addClassName("selected"):p.removeClassName("selected");g+=1}else{p.update().addClassName("empty");p.removeClassName("selected")}});if(a){var l=new Date(this.DATE.getFullYear(),this.DATE.getMonth(),1);this.elems.weeks.each(function(p,v){if(v*7>=k)p.update().hide();else{v=PE.Ui.Dp.getWeekNr(l);p.update(v).show();l=new Date(l.getFullYear(),l.getMonth(),l.getDate()+7)}})}if(this.options.useTime){this.elems.hours.value=this.GET(PE.Ui.Dp.HOURS).toPaddedString(2);this.elems.minutes.value=this.GET(PE.Ui.Dp.MINUTES).toPaddedString(2)}}},
_handleSelectChange:function(a){a.stop();a=a.element();var b=$F(a);if(a.hasClassName("hours"))this.DATE.setHours(b);else a.hasClassName("minutes")&&this.DATE.setMinutes(b)},_handleTableClick:function(a){a.stop();var b=a.element();if(b.hasClassName("hours")||b.hasClassName("minutes"))this._handleSelectChange.bind(this,a)();else if(b.hasClassName("date")&&!b.hasClassName("empty")){this._setSelectedDate(b);this.options.useTime||this._updateTargetAndClose()}else if(b.hasClassName("addYear"))this._alter(PE.Ui.Dp.YEAR,
1);else if(b.hasClassName("subtractYear"))this._alter(PE.Ui.Dp.YEAR,-1);else if(b.hasClassName("addMonth"))this._alter(PE.Ui.Dp.MONTH_IDX,1);else if(b.hasClassName("subtractMonth"))this._alter(PE.Ui.Dp.MONTH_IDX,-1);else b.hasClassName("selectAndClose")&&this._updateTargetAndClose()},_updateTargetAndClose:function(){this._updateTarget(this.DATE);this._close()},_close:function(){this.elems.widget.hide();this.target.fire("time:changed",{elementId:this.target.readAttribute("id"),picker:this})},_alter:function(a,
b){var c=$F(this.elems.overflowDate),e=this.GET(PE.Ui.Dp.YEAR),g=this.GET(PE.Ui.Dp.MONTH_IDX),k=this.GET(PE.Ui.Dp.DAY_OF_MONTH);if(a===PE.Ui.Dp.YEAR)e+=b;else if(a===PE.Ui.Dp.MONTH_IDX){a=b%12;var l=0;if(b>0)l=Math.floor(b/12);else if(b<0)l=Math.ceil(b/12);g+=a;e+=l;b=PE.Ui.Dp.getDaysInMonth(new Date(e,g));c.blank()||(k=Math.min(c,b));if(k>b){this.elems.overflowDate.value=k;k=b}else this.elems.overflowDate.value=""}this._setDate(new Date(e,g,k,this.GET(PE.Ui.Dp.HOURS),this.GET(PE.Ui.Dp.MINUTES)));
this._populateTable()}});
Object.extend(PE.Ui.Dp,{_defaultOptions:{lang:"en",minutesInterval:5,useWeekNr:false},create:function(a,b){if(a=$(a)){b=b||{};b=PE.Ui.Dp._mergeDefaultOptions(b);if(b=new PE.Ui.Dp(a,b)){PE.Ui.Dp.pickers.set(a.identify(),b);PE.Ui.Dp._setupDocumentListener();return b}}},destroy:function(a){if(a=$(a)){a=a.identify();var b=PE.Ui.Dp.pickers.get(a);if(b){b.tearDownListeners();b.elems.widget.remove();PE.Ui.Dp.pickers.unset(a);PE.Ui.Dp.pickers.size()===0&&PE.Ui.Dp._tearDownDocumentListener()}}},getPickerDate:function(a){var b=
a;if(Object.isElement(a))b=a.readAttribute("id");if(a=PE.Ui.Dp.pickers.get(b))return a.getPickerDate()},_mergeDefaultOptions:function(a){var b,c={};for(b in PE.Ui.Dp._defaultOptions)c[b]=PE.Ui.Dp._defaultOptions[b];for(b in a)c[b]=a[b];return c},hideOthers:function(a){PE.Ui.Dp.pickers.each(function(b){b.value!==a&&b.value.elems.widget.visible()&&b.value.elems.widget.hide()})},_setupDocumentListener:function(){if(PE.Ui.Dp.documentListener===null){PE.Ui.Dp.documentListener=PE.Ui.Dp.hideOthers.bind(null,
null);document.observe("click",PE.Ui.Dp.documentListener)}},_tearDownDocumentListener:function(){if(PE.Ui.Dp.documentListener!==null){document.stopObserving("click",PE.Ui.Dp.documentListener);PE.Ui.Dp.documentListener=null}},pickers:$H(),documentListener:null,YEAR:1,MONTH_IDX:2,DAY_OF_MONTH:4,HOURS:8,MINUTES:16,WEEKDAY_IDX:32,WEEKDAY_IDX_OF_MONTH_START:64,IS_LEAPYEAR:128,weekdayNames:{sv:["M&aring;n","Tis","Ons","Tor","Fre","L&ouml;r","S&ouml;n"],en:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},monthNames:{sv:["Jan",
"Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],en:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},monthLengths:[31,28,31,30,31,30,31,31,30,31,30,31],buttons:{done:{sv:"V\u00e4lj",en:"Select"}},texts:{time:{sv:"Tid",en:"Time"},weekShort:{sv:"v.",en:"w."}},getDaysInMonth:function(a){var b=a.getMonth(),c=PE.Ui.Dp.monthLengths[b];if(b===1)if(PE.Ui.Dp.isLeapYear(a))c+=1;return c},isLeapYear:function(a){a=a.getFullYear();return a%4===0&&(a%100!==0||a%400===
0)},weekdayIdxOfMonthStart:function(a){var b=a.getDate();a=a.getDay()-b%7;if(a<0)a+=7;return a},getWeekNr:function(){function a(p){return new Date(p.getFullYear(),p.getMonth(),p.getDate()-((p.getDay()||7)-1))}function b(p){return a(new Date(p,k,4))}function c(p){var v=p.getMonth();if(v!=l&&v!=k)return false;return(new Date(p.getFullYear(),v,p.getDate()+(7-(p.getDay()||7)))).getDate()>3}function e(p){arguments.length<1&&(p=new Date);var v=p.getFullYear(),o=b(v),u=a(p);o=Math.ceil((+u-o)/g)+1;o=Math.ceil(o/
7);if(o==53&&c(p))return 1;return o>0?o:e(new Date(v-1,l,31))}var g=864E5,k=0,l=11;return e}()});
Ajax.Responders.register({onCreate:function(a){if(a.options.ppUseTimeout)a.ppTimeoutId=window.setTimeout(function(){if(a.transport.readyState!=4){PP.util.FireBug.log("core_ext.js:Ajax.Responders.registered timeout function: About to abort request");a.options.onSuccess=null;a.transport.abort();Ajax.activeRequestCount--;a.options.onFailure&&a.options.onFailure(a.transport);a.options.onComplete&&a.options.onComplete(a.transport)}},25E3)},onComplete:function(a){a.options.ppUseTimeout&&window.clearTimeout(a.ppTimeoutId)}});
PP.util.tooltip=Class.create({_pre_init:function(){this.dragObj=this.placeHolder=this.tooltip=this.target=null;this.keepActive=this.lazyLoaded=this.active=false;this.content=null;this.options=Object.clone(PP.util.tooltip._defaultOptions.general);this.targetListeners=[];this.tooltipListeners=[]},initialize:function(a,b,c){this._pre_init();this.target=$(a);if(!this.target){b="There is no target element.";if(typeof a==="string")b+=" No element for id '"+a+"'";return null}Object.extend(this.options,c);
if(b.url&&typeof b.url==="string")this._setAjaxContentOptions(b);else{if(Object.isElement(b)){if(this.options.cloneElementContent===true)b=b.cloneNode(true);a=b.readAttribute("id");typeof a===null?b.identify():b.writeAttribute("id",a+"-tooltip");b.setStyle({display:"block"})}this.content=b;c.ajaxLoad=null}this._setDraggableOptions();this.options.proxies=$A(this.options.proxies).map(function(e){return $(e)});if(this.options.indicator)if(typeof PP.util.tooltip._nillSrc!=="string")console&&console.error&&
console.error("## Could not create tooltip indicator. Set path to a nill image in content attribute of css class ."+PP.util.tooltip._classNames.indicatorIcon+". Target id was #"+this.target.identify());else{a=new Element("img",{className:PP.util.tooltip._classNames.indicatorIcon,src:PP.util.tooltip._nillSrc});if(this.options.indicator==="before")this.options.wrapped&&this.target.down()?this.target.down().insert({top:a}):this.target.insert({top:a});else if(this.options.indicator==="after")this.options.wrapped&&
this.target.down()?this.target.down().insert({bottom:a}):this.target.insert({bottom:a})}if(this.options.activateOnClick===true){this.options.delayIn=0;this.target.addClassName(PP.util.tooltip._classNames.activateTooltipOnClick);this.options.proxies.each(function(e){e.addClassName(PP.util.tooltip._classNames.activateTooltipOnClick)})}this._createTooltip();this._createPlaceHolder();this._setupListeners();return this},_setDraggableOptions:function(){if(this.options.draggable){if(typeof this.options.draggable===
"boolean")this.options.draggable={};var a=Object.clone(PP.util.tooltip._defaultOptions.general.draggable);this.options.draggable=Object.extend(a,this.options.draggable)}},_setAjaxContentOptions:function(a){a.options=a.options||{parameters:{}};var b=Object.clone(PP.util.tooltip._defaultOptions.content.ajax),c=Object.clone(PP.util.tooltip._defaultOptions.content.ajax.parameters);b=Object.extend(b,a.options);this.onAjaxComplete=b.onComplete;b.onComplete=this._ajaxContentOnCompleteWrapper.bind(this);
b.onSuccess=b.onSuccess.bind(this);b.onFailure=b.onFailure.bind(this);b.onCreate=b.onCreate.bind(this);b.parameters=Object.extend(c,a.options.parameters);this.content={url:a.url,options:b}},_ajaxContentOnCompleteWrapper:function(a){this._insertCloseIcon();if(this.options.ajaxLoad==="lazy")this.lazyLoaded=true;this.onAjaxComplete&&this.onAjaxComplete(a);this._makeDraggable()},_scrollTo:function(){},_createTooltip:function(){this.tooltip=(new Element("span",{className:PP.util.tooltip._classNames.tooltip})).hide();
PP.util.tooltip._container.element.insert(this.tooltip);this.options.dimensions!==null&&PP.util.tooltip._setAdjustedDimensions(this.tooltip,this.options.dimensions);this.tooltip.remove();if(this.options.ajaxLoad===null||this.options.ajaxLoad==="create")this._setTooltipContent();this._createCloseIcon();this.tooltip.hide();PP.util.tooltip._container.element.insert({bottom:this.tooltip})},_makeDraggable:function(){if(this.options.draggable&&PP.util.tooltip.prerequisites.scriptaculous.dragdrop()&&this.dragObj===
null){var a=this.options.draggable;if(typeof a.onDrag==="function"){var b=a.onDrag;a.onDrag=function(c,e){this._setKeepActive.bind(this,true);b.bind(c)(c,e)}.bind(this)}else a.onDrag=this._setKeepActive.bind(this,true);this.dragObj=new Draggable(this.tooltip,a)}},_destroyDraggable:function(){if(typeof this.dragObj==="object"&&this.dragObj!==null){this.dragObj.destroy();this.dragObj=null}},_setTooltipContent:function(){var a=false;switch(typeof this.content){case "object":if(Object.isElement(this.content))this.tooltip.insert(this.content);
else if(this.content.url&&typeof this.content.url==="string"){this._setAjaxContent();a=true}break;case "string":this.tooltip.update("<span>"+this.content+"</span");break;default:throw new Error("Unknown content type for tooltip (target id "+this.target.identify()+")");}this._createCloseIcon();a||this._insertCloseIcon()},_createCloseIcon:function(){if(this.options.useCloseIcon&&!this.closeIcon)this.closeIcon=new Element("span",{className:PP.util.tooltip._classNames.closeIcon,title:PP.util.tooltip._texts.closeIconTitle[this.options.lang]})},
_insertCloseIcon:function(){this.options.useCloseIcon&&this.closeIcon&&!this.closeIcon.parentNode&&this.tooltip.insert(this.closeIcon)},_setAjaxContent:function(){if(this.options.ajaxLoad==="live"||this.options.ajaxLoad==="lazy"){this.options.ajaxLoad==="lazy"&&this.lazyLoaded===false&&this._createPlaceHolder();this.options.ajaxLoadUsePlaceHolder===true&&this.placeHolder!==null&&this.tooltip.update(this.placeHolder)}this.req=new Ajax.Updater(this.tooltip,this.content.url,this.content.options);this.req=
null},_createPlaceHolder:function(){if(this.options.ajaxLoadUsePlaceHolder===false)this.placeHolder=null;else{this.placeHolder=PP.util.tooltip._placeHolder.cloneNode(true);this.placeHolder.update(PP.util.tooltip._texts.contentLoading[this.options.lang]);this.options.dimensions!==null&&PP.util.tooltip._setAdjustedDimensions(this.placeHolder,this.options.dimensions)}},_setKeepActive:function(a){if(this.active)this.keepActive=a;if(this.keepActive===false)this.to=setTimeout(this._doHide.bind(this,false),
this.options.delayOut)},_setupListeners:function(){var a=this.options.activateOnClick===true?"click":"mouseenter";this._addListener(this.targetListeners,this.target,a,this._showTooltip.bind(this));!this.options.useCloseIcon&&!this.options.hideCloseIcon&&this._addListener(this.targetListeners,this.target,"mouseleave",this._hideTooltip.bind(this));this.options.activateOnClick===true&&this._addListener(this.targetListeners,this.target,"mouseenter",this._setKeepActive.bind(this,true));this.options.useCloseIcon&&
!this.options.hideCloseIcon&&this._addListener(this.tooltipListeners,this.closeIcon,"click",this._doHide.bind(this,true));var b=this;$A(this.options.proxies).each(function(c){this._addListener(this.targetListeners,c,a,this._showTooltip.bind(this));!b.options.useCloseIcon&&!this.options.hideCloseIcon&&this._addListener(this.targetListeners,c,"mouseleave",this._hideTooltip.bind(this));b.options.activateOnClick===true&&this._addListener(this.targetListeners,c,"mouseenter",this._setKeepActive.bind(this,
true))}.bind(this));this._addListener(this.tooltipListeners,this.tooltip,"mouseenter",this._setKeepActive.bind(this,true));this.options.useCloseIcon||this._addListener(this.tooltipListeners,this.tooltip,"mouseleave",this._hideTooltip.bind(this))},_setupListeners_orig:function(){var a=this.options.activateOnClick===true?"click":"mouseover";this._addListener(this.targetListeners,this.target,a,this._showTooltip.bind(this));this._addListener(this.targetListeners,this.target,"mouseout",this._hideTooltip.bind(this));
this.options.activateOnClick===true&&this._addListener(this.targetListeners,this.target,"mouseover",this._setKeepActive.bind(this,true));$A(this.options.proxies).each(function(b){this._addListener(this.targetListeners,b,a,this._showTooltip.bind(this));this._addListener(this.targetListeners,b,"mouseout",this._hideTooltip.bind(this));this.options.activateOnClick===true&&this._addListener(this.targetListeners,b,"mouseover",this._setKeepActive.bind(this,true))}.bind(this));this._addListener(this.tooltipListeners,
this.tooltip,"mouseover",this._setKeepActive.bind(this,true));this._addListener(this.tooltipListeners,this.tooltip,"mouseout",this._setKeepActive.bind(this,false))},_addListener:function(a,b,c,e){a[c]=e;b.observe(c,e)},_teardownListeners:function(){var a=null;for(a in this.targetListeners)this.targetListeners.hasOwnProperty(a)&&this._removeListener(this.targetListeners,this.target,a);for(a in this.tooltipListeners)this.tooltipListeners.hasOwnProperty(a)&&this._removeListener(this.tooltipListeners,
this.tooltip,a)},_removeListener:function(a,b,c){b.stopObserving(c,a[c])},_showTooltip:function(a){this.keepActive=true;clearTimeout(this.to);if(this.active===true)this.options.activateOnClick===true&&this._doHide.bind(this,true);else this.to=setTimeout(this._doShow.bind(this,a),this.options.delayIn)},_doShow:function(){if(this.active===false){if(this.content.url&&this.options.ajaxLoad==="live"||this.options.ajaxLoad==="lazy"&&this.lazyLoaded===false)this._setTooltipContent();var a=Element.getLayout(this.tooltip);
a=a.get("height")+a.get("border-top")+a.get("border-bottom")+a.get("padding-top")+a.get("padding-bottom");var b=this.target.viewportOffset()[1],c=document.viewport.getHeight();a=Math.max(b+a-c,0);Element.clonePosition(this.tooltip,this.target,{offsetLeft:this.options.offsetLeft+document.viewport.getScrollOffsets().left,offsetTop:this.options.offsetTop-a+document.viewport.getScrollOffsets().top,setWidth:false,setHeight:false});PP.util.tooltip.prerequisites.scriptaculous.effects()?this.tooltip.visualEffect(this.options.effectIn.name,
this.options.effectIn.options):this.tooltip.show();this.target.addClassName(PP.util.tooltip._classNames.activated);this.active=true;if(!this.content.url||this.lazyLoaded&&this.options.ajaxLoad!=="live")this._makeDraggable();this.target.fire(PP.util.tooltip._events.show,{tooltip:this})}},_hideTooltip:function(){this.keepActive=false;clearTimeout(this.to);this.to=setTimeout(this._doHide.bind(this,false),this.options.delayOut)},_doHide:function(a){if(a===true||this.active===true&&this.keepActive===false){!a&&
PP.util.tooltip.prerequisites.scriptaculous.effects()?this.tooltip.visualEffect(this.options.effectOut.name,this.options.effectOut.options):this.tooltip.hide();this.target.removeClassName(PP.util.tooltip._classNames.activated);this.active=false;this._destroyDraggable();this.target.fire(PP.util.tooltip._events.hide,{tooltip:this})}}});
PP.util.tooltip.checkPrerequisites=function(){PP.util.tooltip.prerequisites={scriptaculous:{effects:function(){return typeof Effect==="object"&&typeof Effect.Methods==="object"&&typeof Effect.Methods.visualEffect==="function"},dragdrop:function(){return typeof Draggables==="object"&&typeof Draggable==="function"&&typeof Draggable._dragging==="object"}}}};PP.util.tooltip.checkPrerequisites();
PP.util.tooltip._classNames={activateTooltipOnClick:"pp-tooltip-activate-onclick",activated:"pp-tooltip-activated",tooltip:"pp-tooltip",placeHolder:"pp-tooltip-placeholder",closeIcon:"pp-tooltip-close-icon",indicatorIcon:"pp-tooltip-indicator-icon"};PP.util.tooltip._domIds={container:"pp-tooltip-container"};PP.util.tooltip._events={show:"pp:tooltip-show",hide:"pp:tooltip-hide"};
Object.extend(PP.util.tooltip,{_placeHolder:new Element("div",{className:PP.util.tooltip._classNames.placeHolder}),_container:{id:PP.util.tooltip._domIds.container,element:null},_texts:{contentLoading:{en:"Loading",sv:"Uppdaterar"},closeIconTitle:{en:"Close",sv:"St\u00e4ng"}},_defaultOptions:{general:{lang:"en",activateOnClick:false,indicator:null,wrapped:false,dimensions:null,delayIn:500,delayOut:500,offsetLeft:0,offsetTop:0,ajaxLoad:"create",ajaxLoadUsePlaceHolder:true,effectIn:{name:"Appear",options:{duration:0.2}},
effectOut:{name:"Fade",options:{duration:0.3}},draggable:false,useCloseIcon:false,hideCloseIcon:false,cloneElementContent:true},content:{ajax:{parameters:{},onSuccess:Prototype.emptyFunction,onFailure:Prototype.emptyFunction,onComplete:Prototype.emptyFunction,onCreate:Prototype.emptyFunction}}},_tooltips:$H(),_checkContainer:function(){if(PP.util.tooltip._container.element===null){var a=$(PP.util.tooltip._container.id);a||(a=new Element("div",{id:PP.util.tooltip._container.id}));PP.util.tooltip._container.element=
a;$(document.body).insert({top:a});a=new Element("span",{className:PP.util.tooltip._classNames.indicatorIcon+"-nill"});$(document.body).insert({top:a});var b=a.getStyle("backgroundImage")||null;if(typeof b!=="string"||b.length===0||b==="none")b=null;else{b=b.replace(/url\((.*)\)/,"$1");b=b.replace(/["']/g,"")}PP.util.tooltip._nillSrc=b;a.remove()}},create:function(a,b,c){PP.util.tooltip._checkContainer();c=c||{};var e=null;if(Object.isArray(a)){e=a.shift();c.proxies=a}else e=a;a=new PP.util.tooltip(e,
b,c);if(!a)return null;PP.util.tooltip._registerTooltip(a);return a},destroy:function(a){a.readAttribute("id");a=PP.util.tooltip.get(a);if(!a)return false;a._hideTooltip();PP.util.tooltip._unregisterTooltip(a);return true},get:function(a){a=$(a);var b=null;if(a){a=a.readAttribute("id");b=PP.util.tooltip._tooltips.get(a)}return b},_registerTooltip:function(a){var b=a.target.identify();PP.util.tooltip._tooltips.set(b,a)},_unregisterTooltip:function(a){var b=a.target.identify();a._teardownListeners();
PP.util.tooltip._tooltips.unset(b)},count:function(){return PP.util.tooltip._tooltips.size()},_getBordersAndPadding:function(a){var b=0;try{b=parseInt(a.getStyle("borderLeftWidth").replace("px",""));b+=parseInt(a.getStyle("borderRightWidth").replace("px",""));b+=parseInt(a.getStyle("paddingLeft").replace("px",""));b+=parseInt(a.getStyle("paddingRight").replace("px",""))}catch(c){console.log("error in PP.util.tooltip._getBordersAndPadding, parsing X:"+c)}var e=0;try{e=parseInt(a.getStyle("borderTopWidth").replace("px",
""));e+=parseInt(a.getStyle("borderBottomWidth").replace("px",""));e+=parseInt(a.getStyle("paddingTop").replace("px",""));e+=parseInt(a.getStyle("paddingBottom").replace("px",""))}catch(g){console.log("error in PP.util.tooltip._getBordersAndPadding, parsing Y:"+g)}return{x:b||0,y:e||0}},_setAdjustedDimensions:function(a,b){var c=PP.util.tooltip._getBordersAndPadding(a),e=b.width;e=e===undefined||e===null||e==="auto"?"auto":e-c.x+"px";b=b.height;b=b===undefined||b===null||b==="auto"?"auto":b-c.y+"px";
a.setStyle({width:e,height:b})}});
var TableJs=function(){function a(){return{map:{},array:[]}}function b(o,u){this.tableId=o;(this.table=p.getElementById(this.tableId))&&(this.colspan=this.table.rows[0].cells.length);this.options=e(u);this.currentInsertions=a()}function c(o,u){return o.currentInsertions.map[u]}function e(o){o||(o={});for(var u in v)o.hasOwnProperty(u)||(o[u]=v[u]);return o}function g(o,u){return o+"_tr_"+(u+"").replace(/[@ ,.?!$&()^~*]/g,"_")}function k(o,u){if(u){o=u.previousSibling;u.parentNode.removeChild(u);return o}return null}
function l(o,u,D){if(o&&typeof Effect=="object"&&typeof Effect.Highlight=="function"){var E=l;u={afterFinish:function(J){delete E.effectsRunning[J.element.id];D&&D(o)},duration:typeof u=="number"?u:2};!E.effectsRunning[o.id]&&(E.effectsRunning[o.id]=new Effect.Highlight(o,u))}}var p=window.document,v={maxOpenRows:1,maxOpenOverflow:"close-oldest",toggle:false};b.prototype.openRow=function(o,u){var D=p.getElementById(g(this.tableId,o)),E="inserted-row-"+o,J;if(this.currentInsertions.map[o]){this.options.toggle?
this.closeRow(o):l(c(this,o).insertedRow);u&&u(null)}else{if(this.options.maxOpenRows>0&&this.currentInsertions.array.length>=this.options.maxOpenRows)if(typeof this.options.maxOpenOverflow=="function"){if(!this.options.maxOpenOverflow(D))return}else if(this.options.maxOpenOverflow==="close-oldest"){J=this.currentInsertions.array[0];this.closeRow(J)}else if(this.options.maxOpenOverflow==="close-newest"){J=this.currentInsertions.array[this.currentInsertions.array.length-1];this.closeRow(J)}else{l(D);
u&&u(null);return}J=p.createElement("tr");var O=p.createElement("td");J.id=E;J.className=[D.className,"inserted-row"].join(" ");O.colSpan=this.colspan;J.appendChild(O);D.nextSibling?D.parentNode.insertBefore(J,D.nextSibling):D.parentNode.appendChild(J);this.currentInsertions.array.push(o);o=this.currentInsertions.map[o]={row:D,insertedRow:J,insertedCell:O};u&&u(o)}};b.prototype.closeRow=function(o,u){var D=k(this,p.getElementById("inserted-row-"+o));delete this.currentInsertions.map[o];for(var E=
0,J,O=this.currentInsertions.array.length;E<O;++E){J=this.currentInsertions.array[E];if(J===o){this.currentInsertions.array.splice(E,1);break}}u&&u(D)};b.prototype.closeRows=function(o){for(var u=this.currentInsertions.array,D,E=[],J=0,O=u.length;J<O;++J)(D=k(this,p.getElementById("inserted-row-"+u[J])))&&E.push(D);this.currentInsertions=a();o&&o(E)};b.prototype.highlightRow=function(o){var u={duration:2,afterFinish:function(){}},D;if(arguments.length>1){D=arguments[1];switch({}.toString.call(D)){case "[object Number]":u.duration=
D;break;case "[object Function]":u.afterFinish=D;break;case "[object Object]":typeof D.duration=="number"&&(u.duration=D.duration);typeof D.callback=="function"&&(u.afterFinish=D.callback);default:break}}l(p.getElementById(this.tableId+"_tr_"+o),u.duration,u.afterFinish)};l.effectsRunning={};return{create:function(o,u){o=new b(o,u);return o.table?o:null},tableRowId:g}}();function openSpellingWindow(a,b){var c=document.forms.speling;c=200;for(var e=eval(a).value.split("\n"),g=0,k=e.length;g<k;++g)c+=e[g].length===0?8:18*(1+parseInt(e[g].length/80));if(c<300)c=300;if(c>screen.availHeight-100)c=screen.availHeight-100;(a=window.open("/servlets/speling?command=fetchText&form_element_path="+a,"speling"+b,"width=600,height="+c+",scrollbars,resizable"))&&a.focus()};
